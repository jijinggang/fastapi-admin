(function(e){function t(t){for(var s,n,o=t[0],l=t[1],c=t[2],_=0,d=[];_<o.length;_++)n=o[_],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&d.push(i[n][0]),i[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(s=!1)}s&&(r.splice(t--,1),e=n(n.s=a[0]))}return e}var s={},i={app:0},r=[];function n(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=s,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(a,s,function(t){return e[t]}.bind(null,s));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"01f7":function(e,t,a){},"034f":function(e,t,a){"use strict";var s=a("85ec"),i=a.n(s);i.a},"0958":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"preview"},[e.field.multiple?a("div",{staticClass:"thumbnail"},[a("b-draggable",{staticClass:"row",on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},e._l(e.model,(function(t,s){return a("b-form-uploader-item",{key:s,staticClass:"col-4",attrs:{name:e.name,id:e.id+"_"+s,field:e.field,parent:e.parent,"allow-add":""},on:{input:e.update,remove:function(t){e.model.splice(s,1),e.update()},add:function(t){e.model.splice(s+1,0,null),e.update()}},model:{value:e.model[s],callback:function(t){e.$set(e.model,s,t)},expression:"model[k]"}})})),1)],1):a("div",[a("div",{staticClass:"row"},[a("b-form-uploader-item",{staticClass:"col-12",attrs:{id:e.id,name:e.name,field:e.field,parent:e.parent},on:{"open-file-browser":function(t){return e.openFileBrowser(e.name)},input:e.update,remove:function(t){e.model=null,e.update()}},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)])])])},i=[],r=a("310e"),n=a.n(r),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-card",[a("b-data-value",{staticClass:"text-center",attrs:{field:e.field,name:e.name,model:e.parent}}),e.field.limit&&e.field.limit.width?a("div",{staticClass:"text-center text-muted mt-2"},[e._v(e._s(e.$t("messages.image_size",e.field.limit)))]):e._e(),a("div",{staticClass:"text-center",attrs:{slot:"footer"},slot:"footer"},[a("b-form-file",e._b({ref:"file",staticClass:"d-none",attrs:{id:e.fileName,name:e.name,multiple:!1},on:{input:e.upload},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}},"b-form-file",e.field,!1)),e.field.showInput?a("b-form-input",{staticClass:"mb-2",attrs:{value:String(e.file||"")},on:{input:function(t){return e.$emit("input",arguments[0])}}}):e._e(),e.field.showBrowse?a("b-btn",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(t){return e.$emit("open-file-browser")}}},[e._v(e._s(e.$t("actions.file_browser")))]):e._e(),a("label",{staticClass:"btn btn-primary m-0 mr-2 btn-sm",attrs:{for:"file_"+e.id}},[e._v(e._s(e.file?e.$t("actions.change"):e.$t("actions.choose")))]),a("b-btn",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(t){return e.$emit("remove")}}},[e._v(e._s(e.$t("actions.delete")))]),e.allowAdd?a("b-btn",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(t){return e.$emit("add")}}},[e._v(e._s(e.$t("actions.add")))]):e._e(),e.field.showCopy?a("b-btn",{ref:"copy_btn",staticClass:"mr-2",attrs:{"data-clipboard-text":e.value,size:"sm"}},[e._v(e._s(e.$t("actions.copy")))]):e._e()],1)],1)],1)},l=[],c=(a("b0c0"),a("d3b7"),a("ac1f"),a("3ca3"),a("466d"),a("1276"),a("ddb0"),a("2b3d"),a("8a2b")),u=a("a026"),_={components:{BDataValue:c["a"]},props:{value:{},field:{},id:{},parent:{},name:{},allowAdd:{type:Boolean,default:!1}},data:function(){return{model:this.value,file:this.value,current:this.value,fileData:{}}},watch:{value:function(e){this.file=e}},computed:{text:function(){return String(this.value).split("/").pop()},modalName:function(){return"modal_".concat(this.id)},fileName:function(){return"file_".concat(this.id)},tag:function(){var e={image:"img",audio:"audio",video:"video"};return e[this.field.type]?e[this.field.type]:"div"}},mounted:function(){u["default"].nextTick((function(){}))},methods:{reset:function(e){return e&&this.$snotify.error(e),this.model=this.oldValue,!1},upload:function(){var e=this;if(this.file){var t=new FormData;t.append("type",this.name),t.append("file",this.file),this.fileData=this.file;var a=URL.createObjectURL(this.file),s=function(){e.$http.post("upload",t).then((function(t){var a=t.data;e.file=a.url,e.$emit("input",e.file),e.$snotify.success(e.$t("messages.uploaded"))}))},i=this.field.limit||{},r=i.width,n=i.height,o=i.size;if(this.file.size>o)return this.reset(this.$t("errors.too_large",{limit:parseInt(o/1024)}));if(this.file.type.match(/^image/)){var l=new Image;l.src=a,l.onload=function(){if(e.field.limit&&(l.naturalHeight!=n||l.naturalWidth!=r))return e.reset(e.$t("errors.wrong_size",{width:r,height:n}));s()}}else s()}}}},d=_,f=(a("af71"),a("2877")),p=Object(f["a"])(d,o,l,!1,null,"0fd8d00e",null),m=p.exports,h=a("6e87"),b={components:{BDraggable:n.a,BFormUploaderItem:m},props:{value:{},field:{},id:{},parent:{},name:{}},data:function(){return{model:this.value||[],file:null,current:this.value}},watch:{value:function(e){this.model=e}},computed:{tag:function(){return"image"===this.field.type?"img":this.field.type}},methods:{openFileBrowser:function(e){this.$store.commit(h["a"].SHOW_FILE_BROWSER,{name:e})},update:function(){this.$emit("input",this.model)}}},g=b,v=(a("5411"),Object(f["a"])(g,s,i,!1,null,null,null));v.exports},1484:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("5319"),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("1276"),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_2__),E_downcode_fastapi_admin_front_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("5530"),vuex__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("2f62");__webpack_exports__["a"]={components:{},props:{},data:function(){return{loaded:!1,form:{}}},watch:{$route:function(){this.fetchForm()}},computed:Object(E_downcode_fastapi_admin_front_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__["a"])({},Object(vuex__WEBPACK_IMPORTED_MODULE_4__["c"])(["auth"]),{uri:function(){return this.$route.params.uri.replace(/\./g,"/")}}),methods:{fetch:function(){},fetchForm:function(){var e=this;this.$http.get(this.uri).then((function(t){var a=t.data;e.form=a,e.form.action||(e.form.action=e.uri),e.form.title||(e.form.title=e.$inflection.titleize(String(e.$route.query.uri).split("/").pop()))}))},onSuccess:function onSuccess(data){var message=data.message,then=data.then,redirect=data.redirect;message&&this.$snotify.success(message),then?eval(then):redirect&&this.$router.push({path:redirect})}},mounted:function(){},created:function(){this.fetchForm()}}},"18a9":function(e,t,a){"use strict";var s=a("6cef"),i=a.n(s);i.a},"206d":function(e,t,a){"use strict";var s=a("4413"),i=a.n(s);i.a},"423e":function(e){e.exports=JSON.parse('{"actions":{"create":"新建","new":"新建","delete":"删除","delete_all":"全部删除","reload":"刷新","search":"搜索","search_and_export":"搜索并导出","save":"保存","back":"返回","submit":"提交","view":"查看","actions":"操作","upload":"上传","change":"更换","choose":"选择","login":"登录","edit":"编辑","select_all":"选择全部","clear_selected":"清除选择"},"texts":{},"fields":{"username":"用户名","password":"密码"},"messages":{"paginate":"共{total}条数据","login_please":"请先登录","login_footer":"FASTAPI ADMIN - 为FastAPI而生的后台管理面板","login_description":"管理后台","dashboard":"控制台","go_home":"返回首页","succeed":"操作成功","uploaded":"上传成功","deleted":"删除成功","deleted_all":"全部删除成功","confirm_delete":"确定要删除吗？","image_size":"尺寸要求：{width}x{height}","confirm_bulk_action":"确定执行批量操作？","no_options_text":"暂无可选项","bulk_success":"批量操作成功！"},"errors":{"too_large":"请上传小于{limit}KB的文件","wrong_size":"请上传{width}x{height}像素的图片"}}')},4360:function(e,t,a){"use strict";a.d(t,"b",(function(){return u["a"]}));var s,i,r,n,o=a("ade3"),l=a("a026"),c=a("2f62"),u=a("6e87"),_=a("a18c"),d=(a("7db0"),a("c975"),a("b0c0"),a("ac1f"),a("466d"),[{name:"首页",url:"/",icon:"icon-home"}]),f=a("2ef0"),p=a.n(f),m=a("ba6a"),h=a("460a"),b={state:{name:"",url:"",description:"",menus:d,languages:!1,footer:!1,theme:"cosmo",logo:"",locale:"en-US",locale_switcher:!1,theme_switcher:!1,login_url:null,html:"",css:[],js:[],cdn:"bootcdn",header:null,grid_style:1,enable_loading:!0,sidebar_userinfo:!0,page_header:"",components:[],use_field_apis:!0,resource_prefix:"/rest",fetched:!1},mutations:(s={},Object(o["a"])(s,u["a"].SET_SITE,(function(e,t){for(var a in t){var s=t[a];"undefined"!==typeof s&&(e[a]=s)}})),Object(o["a"])(s,u["a"].SET_PAGE_HEADER,(function(e,t){(!1===t||t)&&(e.page_header=t)})),Object(o["a"])(s,u["a"].SET_THEME,(function(e,t){e.theme=t;var a={bootcdn:"https://cdn.bootcss.com",cdnjs:"https://cdnjs.cloudflare.com/ajax/libs"},s=(a[e.cdn]||e.cdn)+"/bootswatch/4.2.1/".concat(e.theme,"/bootstrap.min.css");document.getElementById("css-skin").href=s,h["a"].set("theme",e.theme)})),s),getters:{currentMenu:function(e,t,a){var s=a.route.path,i=p.a.find(e.menu,{url:s})||{};return!i.name&&s.indexOf("/rest/")>-1&&(s=s.match(/(\/rest\/\w+)/).pop(),i=p.a.find(e.menu,{url:s})||{}),i}},actions:(i={},Object(o["a"])(i,u["a"].FETCH_SITE,(function(e){var t=e.commit,a=e.dispatch,s=e.state;m["a"].get("site").then((function(e){var i=e.data;i.fetched=!0,t(u["a"].SET_SITE,i),a(u["a"].FETCH_PAGE_HEADER),s.page_header,s.theme&&t(u["a"].SET_THEME,s.theme),i.locale&&t(u["a"].SET_LOCALE,i.locale)}))})),Object(o["a"])(i,u["a"].FETCH_PAGE_HEADER,(function(e){var t=e.commit,a=e.state,s=e.rootState,i=s.route.path,r=p.a.find(a.menu,{url:i})||{};!r.name&&i.indexOf("/rest/")>-1&&(i=i.match(/(\/rest\/\w+)/).pop(),r=p.a.find(a.menu,{url:i})||{}),t(u["a"].SET_PAGE_HEADER,r.name||"")})),i)},g={state:{user:null,token:null},mutations:Object(o["a"])({},u["a"].SET_AUTH,(function(e,t){t||(t={}),e.user=t.user,e.token=t.token,h["a"].set("auth",t)})),actions:(r={},Object(o["a"])(r,u["a"].GET_AUTH,(function(e){var t=e.commit,a={};try{a=h["a"].get("auth")}catch(s){a={token:null,user:null}}t(u["a"].SET_AUTH,a)})),Object(o["a"])(r,u["a"].GO_LOGIN,(function(){return b.state.login_url?location.href=b.state.login_url:_["a"].push({name:"login"})})),r)},v=(a("5319"),a("9225")),E={state:{locale:null},mutations:Object(o["a"])({},u["a"].SET_LOCALE,(function(e,t){e.locale=t,h["a"].set("locale",t),v["a"].locale=t})),getters:{currentLanguage:function(e){return String(e.locale).replace(/-\w+/,"")}},actions:Object(o["a"])({},u["a"].FETCH_LOCALE,(function(e){var t=e.commit,a=h["a"].get("locale");a&&t(u["a"].SET_LOCALE,a)}))},O={auth:g,i18n:E,site:b};l["default"].use(c["a"]);t["a"]=new c["a"].Store({modules:O,state:{loading:!1,downloadUrl:null},getters:{},mutations:(n={},Object(o["a"])(n,u["a"].DOWNLOAD,(function(e,t){var a=this;e.downloadUrl="",l["default"].nextTick((function(){a.downloadUrl=t}))})),Object(o["a"])(n,u["a"].START_LOADING,(function(e){e.loading=!0})),Object(o["a"])(n,u["a"].STOP_LOADING,(function(e){e.loading=!1})),n),actions:{}})},4413:function(e,t,a){},"460a":function(e,t,a){"use strict";t["a"]={get:function(e,t){try{return JSON.parse(localStorage.getItem("fastapi_admin_".concat(e)))}catch(a){return t}},set:function(e,t){localStorage.setItem("fastapi_admin_".concat(e),JSON.stringify(t))}}},"49f8":function(e,t,a){var s={"./en-US.json":"e0e1","./zh-CN.json":"423e"};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}i.keys=function(){return Object.keys(s)},i.resolve=r,e.exports=i,i.id="49f8"},"53d7":function(e,t,a){"use strict";var s=a("01f7"),i=a.n(s);i.a},5411:function(e,t,a){"use strict";var s=a("c248"),i=a.n(s);i.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2ef0"),i=a.n(s),r=a("a026"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view"),a("vue-snotify"),a("div",{domProps:{innerHTML:e._s(e.$store.state.site.html)}})],1)},o=[],l=(a("d81d"),a("5530")),c=a("2f62"),u=a("4360"),_={name:"app",components:{},data:function(){return{frameSrc:"",path:[]}},watch:{"site.name":function(e){window.document.title=e||"FASTAPI-ADMIN DASHBOARD"},"site.skin":function(e){var t=document.getElementById("css-skin");t.setAttribute("href","https://cdn.bootcss.com/bootswatch/4.1.1/".concat(e,"/bootstrap.min.css"))},"site.css":function(e){e.map((function(e){var t=document.createElement("link");t.setAttribute("href",e),t.setAttribute("rel","stylesheet"),document.head.appendChild(t)}))},"site.js":function(e){e.map((function(e){var t=document.createElement("script");t.setAttribute("src",e),document.body.appendChild(t)}))},"$route.path":function(){this.$store.dispatch(u["b"].FETCH_PAGE_HEADER)}},computed:Object(l["a"])({},Object(c["c"])(["site"])),created:function(){this.$store.dispatch(u["b"].FETCH_SITE)}},d=_,f=(a("034f"),a("2877")),p=Object(f["a"])(d,n,o,!1,null,null,null),m=p.exports,h=a("a18c"),b=(a("ba6a"),a("9225")),g=a("ee71"),v=a.n(g),E=a("31bd"),O=a("5f5b"),y=a("f213"),w=(a("1f54"),a("679c"),a("2dd8"),a("5903"),a("26e8"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{class:e.classList},[a("input",{staticClass:"switch-input",attrs:{type:"checkbox"},domProps:{value:e.value,checked:e.isChecked},on:{change:e.handleChange}}),e.isOn?[a("span",{staticClass:"switch-label",attrs:{"data-on":e.on,"data-off":e.off}})]:[a("span",{staticClass:"switch-label"})],a("span",{staticClass:"switch-handle"})],2)}),C=[],P={model:{prop:"checked",event:"change"},props:{value:{default:!0},uncheckedValue:{default:!1},checked:{default:!1},type:{type:String,default:"default"},variant:{type:String,default:""},pill:{type:Boolean,default:!1},on:{type:String,default:null},off:{type:String,default:null},size:{type:String,default:null}},computed:{classList:function(){return["switch",this.switchType,this.switchVariant,this.switchPill,this.switchSize]},switchType:function(){return this.type?"switch-".concat(this.type):"switch-default"},switchVariant:function(){return this.variant?"switch-".concat(this.variant):"switch-secondary"},switchPill:function(){return this.pill?"switch-pill":null},switchSize:function(){return this.size?"switch-".concat(this.size):""},isChecked:function(){return this.checked===this.value},isOn:function(){return!!this.on||null}},methods:{handleChange:function(e){var t=e.target.checked;this.$emit("change",t?this.value:this.uncheckedValue)}}},k=P,D=Object(f["a"])(k,w,C,!1,null,null,null),M=D.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isIntl?a("div",{staticClass:"languages mb-1"},e._l(e.languages,(function(t,s){return a("span",{key:s,staticClass:"badge mr-1 mb-0 pointer",class:"badge-"+(e.currentLanguage===s?"primary":"secondary"),on:{click:function(t){return e.changeLanguage(s,e.name)}}},[e._v(e._s(t))])})),0):e._e(),["select"].includes(e.field.type)?a("b-form-select",e._b({attrs:{formatter:e.getFormatter(e.field,e.value),id:e.id,options:e.options,name:e.name},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"b-form-select",e.field,!1)):["select2"].includes(e.field.type)?a("div",[a("b-select",e._b({attrs:{parent:e.parent},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"b-select",e.field,!1))],1):["tree","treeselect"].includes(e.field.type)?a("b-tree-select",e._b({attrs:{normalizer:e.treeSelectNormalizer,"value-consists-of":"LEAF_PRIORITY"},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"b-tree-select",e.field,!1)):["date","datetime"].includes(e.field.type)?a("date-picker",e._b({attrs:{name:e.name,type:e.field.type,format:"YYYY-MM-DDTHH:mm:ss","value-type":"format"},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"date-picker",e.field,!1)):["radiolist"].includes(e.field.type)?a("b-form-radio-group",e._b({attrs:{name:e.name},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"b-form-radio-group",e.field,!1)):["checkboxlist"].includes(e.field.type)?a("b-form-checkbox-group",e._b({attrs:{name:e.name},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"b-form-checkbox-group",e.field,!1)):["checkboxtable"].includes(e.field.type)?a("div",{staticClass:"checkboxtable"},e._l(e.groupedOptions,(function(t,s){return a("div",{key:s,staticClass:"mt-1"},[a("b-form-checkbox-group",e._b({attrs:{name:e.name,options:t},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"b-form-checkbox-group",e.field,!1))],1)})),0):["textarea"].includes(e.field.type)?a("b-form-textarea",e._b({attrs:{name:e.name,id:e.id,rows:e.field.rows||3},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"b-form-textarea",e.field,!1)):["file-picker"].includes(e.field.type)?a("div",[a("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.file-manager",modifiers:{"file-manager":!0}}]},[e._v("选择文件")])],1):["image"].includes(e.field.type)?a("div",[a("b-card",{attrs:{"img-src":e.model,"img-left":""}},[a("b-card-text",[a("b-form-input",e._b({attrs:{name:e.name,id:e.id},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"b-form-input",e.field,!1))],1)],1)],1):["switch","checkbox"].includes(e.field.type)?a("div",[a("b-form-checkbox",e._b({attrs:{variant:"success",size:"lg",pill:"",type:"3d",id:e.id},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"b-form-checkbox",e.field,!1))],1):["wysiwyg","html"].includes(e.field.type)?a("div",[e.field.cropper?a("avatar-cropper",e._b({ref:"cropper",attrs:{trigger:"#cropper_"+e.id},on:{uploaded:e.cropperUploaded,completed:e.cropperUploadComplete}},"avatar-cropper",e.cropperOptions,!1)):e._e(),a("b-html-editor",e._b({ref:"editor",attrs:{state:e.state,id:e.id,content:e.model},on:{"open-cropper":function(t){e.$refs.cropper&&e.$refs.cropper.pickImage()},change:e.htmlEditorInput},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.wrapFirstLine(t)}},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"b-html-editor",e.field,!1))],1):["json"].includes(e.field.type)?a("div",[a("b-json-editor",e._b({ref:"editor",attrs:{value:e.model,options:{modes:["tree","view","form","code","text","preview"],language:e.currentLanguage}},on:{input:function(t){e.model=arguments[0]}},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"b-json-editor",e.field,!1))],1):e.field.fields?a("div",[["array"].includes(e.field.type)||e.field.is_array||e.parent.is_array?a("div",[e.field.is_table||e.parent.is_table?a("b-table",{attrs:{hover:"",bordered:"",items:e.model,fields:e.myFields},scopedSlots:e._u([e._l(e.myFields,(function(t,s){return{key:s,fn:function(i){return[a("b-form-field",{key:"input_"+i.index+"_"+s,attrs:{parent:e.parent,field:t,name:"input_"+i.index+"_"+s,id:"input_"+i.index+"_"+s},model:{value:e.model[i.index][s],callback:function(t){e.$set(e.model[i.index],s,t)},expression:"model[row.index][k]"}})]}}})),{key:"_actions",fn:function(t){return[a("b-btn",{attrs:{size:"sm"},on:{click:function(a){return e.model.splice(t.index+1,0,{})}}},[a("i",{staticClass:"icon-plus"}),e._v(" "+e._s(e.$t("actions.add"))+" ")]),a("b-btn",{attrs:{size:"sm"},on:{click:function(a){return e.model.splice(t.index,1)}}},[a("i",{staticClass:"icon-trash"}),e._v(" "+e._s(e.$t("actions.delete"))+" ")])]}}],null,!0)},[a("template",{slot:"HEAD__actions"},[a("b-btn",{attrs:{size:"sm"},on:{click:e.addRow}},[a("i",{staticClass:"icon-plus"}),e._v(" "+e._s(e.$t("actions.add"))+" ")])],1)],2):a("b-draggable",{model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},[a("transition-group",{staticClass:"row",attrs:{tag:"div"}},[e._l(e.model,(function(t,s){return a("b-col",{key:"draggable-"+e.name+"-"+s,attrs:{cols:"",lg:e.field.item_cols||6}},[a("b-card",{staticClass:"mb-4"},[a("b-row",{staticClass:"justify-content-between",attrs:{slot:"header"},slot:"header"},[a("b-col",[e._v("No. "+e._s(s+1))]),a("b-col",{staticClass:"text-right",attrs:{right:""}},[a("b-btn",{attrs:{size:"sm"},on:{click:function(t){return e.model.splice(s,1)}}},[a("i",{staticClass:"icon-trash"}),e._v(" "+e._s(e.$t("actions.delete"))+" ")])],1)],1),e._l(e.myFields,(function(t,i){return a("b-form-group",e._b({key:i,attrs:{"label-for":"input_"+e.name+"_"+s+"_"+i}},"b-form-group",t,!1),[a("b-form-field",{attrs:{parent:e.parent,name:e.name+"."+s+"."+i,field:t,id:"input_"+e.name+"_"+s+"_"+i},model:{value:e.model[s][i],callback:function(t){e.$set(e.model[s],i,t)},expression:"model[i][key]"}})],1)}))],2)],1)})),a("b-col",{key:-1,staticClass:"d-flex align-items-center justify-content-center",attrs:{cols:"",lg:e.field.item_cols||6}},[a("b-btn",{staticClass:"p-5",attrs:{size:"lg",block:""},on:{click:function(t){e.model=e.model?e.model:[],e.model.push({})}}},[a("i",{staticClass:"fa fa-plus"})])],1)],2)],1)],1):["object"].includes(e.field.type)?a("div",[a("b-card",[a("b-form-builder",{ref:"subForm",attrs:{"sub-form":e.name||"",languages:e.languages,fields:e.myFields,parent:e.parent},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)],1):a("div",e._l(e.myFields,(function(t,s){return a("b-form-group",e._b({key:s,attrs:{"label-for":"input_"+e.name+"_"+s}},"b-form-group",t,!1),[a("b-form-field",{attrs:{parent:e.parent,name:s,field:t,id:"input_"+e.name+"_"+s},model:{value:e.model[s],callback:function(t){e.$set(e.model,s,t)},expression:"model[key]"}})],1)})),1)]):a("b-input-group",[e.field.prependIcon||e.field.prepend?a("b-input-group-prepend",{attrs:{"is-text":""}},[e.field.prependIcon?a("i",{class:e.field.prependIcon}):a("span",{domProps:{innerHTML:e._s(e.field.prepend)}})]):e._e(),a("b-form-input",e._b({attrs:{state:e.state,id:e.id,name:e.name,formatter:e.getFormatter(e.field,e.value)},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"b-form-input",e.field,!1)),e.field.appendIcon||e.field.append?a("b-input-group-append",{attrs:{"is-text":""}},[e.field.appendIcon?a("i",{class:e.field.appendIcon}):a("span",{domProps:{innerHTML:e._s(e.field.append)}})]):e._e()],1)],1)},$=[],A=a("ac01"),T=A["a"],j=(a("b619"),Object(f["a"])(T,x,$,!1,null,null,null)),L=j.exports,I=a("8a2b"),S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-table")},B=[],U={data:function(){return{}}},R=U,W=Object(f["a"])(R,S,B,!1,null,null,null),K=W.exports,q=a("6a29"),F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-table",{staticClass:"table-builder",attrs:{fields:e.fields,items:e.items},scopedSlots:e._u([e._l(e.fields,(function(t,s){return{key:s,fn:function(i){return[a("b-data-value",{key:s,attrs:{field:t,lang:e.currentLanguage,name:s,model:i.item,"short-id":""}})]}}}))],null,!0)},[e._l(e._.omit(e.fields,"_actions"),(function(t,s){return a("template",{slot:"HEAD_"+s},[a("div",{key:s,class:{"text-right":["number"].includes(t.type)}},[e._v(" "+e._s(t.label||s)+" ")])])}))],2)},N=[],H={components:{BDataValue:I["a"]},props:{fields:{},items:Array},computed:Object(l["a"])({},Object(c["c"])(["site","i18n"]),{},Object(c["b"])(["currentMenu","currentLanguage"]))},z=H,G=Object(f["a"])(z,F,N,!1,null,null,null),V=G.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"avatar-cropper"},[e.dataUrl?a("div",{staticClass:"avatar-cropper-overlay"},[a("div",{staticClass:"avatar-cropper-mark"},[a("a",{staticClass:"avatar-cropper-close",attrs:{href:"javascript:;"},on:{click:e.destroy}},[e._v("×")])]),a("div",{staticClass:"avatar-cropper-container"},[a("div",{staticClass:"avatar-cropper-image-container"},[a("img",{ref:"img",attrs:{src:e.dataUrl,alt:""},on:{load:function(t){return t.stopPropagation(),e.createCropper(t)}}})]),a("div",{staticClass:"avatar-cropper-footer"},[a("button",{staticClass:"avatar-cropper-btn",attrs:{type:"button"},domProps:{textContent:e._s(e.labels.cancel)},on:{click:e.destroy}},[e._v("Cancel")]),a("button",{staticClass:"avatar-cropper-btn",attrs:{type:"button"},domProps:{textContent:e._s(e.labels.submit)},on:{click:e.submit}},[e._v("Submit")])])])]):e._e(),a("input",{ref:"input",staticClass:"avatar-cropper-img-input",attrs:{type:"file",accept:e.mimes}})])},Q=[],Y=(a("c975"),a("b0c0"),a("a9e3"),a("53ca")),X=(a("6107"),a("bab4")),Z=a.n(X),ee={props:{trigger:{type:[String,Element],required:!0},uploadHandler:{type:Function},uploadUrl:{type:String},uploadHeaders:{type:Object},uploadFormName:{type:String,default:"file"},uploadFormData:{type:Object,default:function(){return{}}},cropperOptions:{type:Object,default:function(){return{aspectRatio:1,autoCropArea:1,viewMode:1,movable:!1,zoomable:!1}}},outputOptions:{type:Object,default:function(){return{width:512,height:512}}},outputMime:{type:String,default:"image/jpeg"},outputQuality:{type:Number,default:.9},mimes:{type:String,default:"image/png, image/gif, image/jpeg, image/bmp, image/x-icon"},labels:{type:Object,default:function(){return{submit:"提交",cancel:"取消"}}}},data:function(){return{cropper:void 0,dataUrl:void 0,filename:void 0}},methods:{destroy:function(){this.cropper.destroy(),this.$refs.input.value="",this.dataUrl=void 0},submit:function(){this.$emit("submit"),this.uploadUrl?this.uploadImage():this.uploadHandler?this.uploadHandler(this.cropper):this.$emit("error","No upload handler found.","user"),this.destroy()},pickImage:function(){this.$refs.input.click()},createCropper:function(){this.cropper=new Z.a(this.$refs.img,this.cropperOptions)},uploadImage:function(){var e=this;this.cropper.getCroppedCanvas(this.outputOptions).toBlob((function(t){var a=new FormData,s=new XMLHttpRequest,i=Object.assign({},e.uploadFormData);for(var r in i)a.append(r,i[r]);for(var n in a.append(e.uploadFormName,t,e.filename),e.$emit("uploading",a,s),s.open("POST",e.uploadUrl,!0),e.uploadHeaders)s.setRequestHeader(n,e.uploadHeaders[n]);s.onreadystatechange=function(){if(4===s.readyState){var t="";try{t=JSON.parse(s.responseText)}catch(i){t=s.responseText}e.$emit("completed",t,a,s),[200,201,204].indexOf(s.status)>-1?e.$emit("uploaded",t,a,s):e.$emit("error","Image upload fail.","upload",s)}},s.send(a)}),this.outputMime,this.outputQuality)}},mounted:function(){var e=this,t="object"==Object(Y["a"])(this.trigger)?this.trigger:document.querySelector(this.trigger);t?t.addEventListener("click",this.pickImage):this.$emit("error","No avatar make trigger found.","user");var a=this.$refs.input;a.addEventListener("change",(function(){if(null!=a.files&&null!=a.files[0]){var t=new FileReader;t.onload=function(t){e.dataUrl=t.target.result},t.readAsDataURL(a.files[0]),e.filename=a.files[0].name||"unknown",e.$emit("changed",a.files[0],t)}}))}},te=ee,ae=(a("18a9"),Object(f["a"])(te,J,Q,!1,null,null,null)),se=ae.exports,ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.component?a(e.component,{tag:"component"}):e._e()],1)},re=[],ne=(a("13d5"),a("4fad"),a("3835")),oe=a("4478"),le=a("2909"),ce={props:{config:{required:!0}},data:function(){return{component:null}},mounted:function(){},watch:{config:"setComponent"},methods:{setComponent:function(){if(!this.config)return this.component=null;if("string"===typeof this.config)return this.component={template:this.config};var e={},t=this.config,a=Object.assign({},t.data);e.data=a,e.name=t.name,"function"!==typeof e.data&&(e.data=function(){return Object.assign({},a)});var s=function(e){return Array.isArray(e)?Object(oe["a"])(Function,Object(le["a"])(e)):e},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.entries(e).reduce((function(e,t){var a=Object(ne["a"])(t,2),i=a[0],r=a[1];return e[i]=s(r),e}),{})};e.methods=i(t.methods,s),e.computed=i(t.computed,s),e.created=t.created?s(t.created):null,e.mounted=t.mounted?s(t.mounted):null,e.watch=t.watch?s(t.watch):null,e.template=t.template,e.render=s(t.render),this.component=Object.assign({},e,{})}}},ue=ce,_e=Object(f["a"])(ue,ie,re,!1,null,null,null),de=_e.exports,fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"editor"})},pe=[],me=(a("6014"),a("dcf5")),he=a.n(me),be={name:"b-json-editor",props:{value:null,options:{}},data:function(){return{editor:null}},mounted:function(){var e=this;this.options.onChange=function(){e.$emit("input",e.editor.get())},this.editor=new he.a(this.$refs.editor,this.options),"string"===typeof this.value&&(this.value=JSON.parse(this.value)),this.editor.set(this.value||{})},created:function(){}},ge=be,ve=Object(f["a"])(ge,fe,pe,!1,null,null,null),Ee=ve.exports;r["default"].component("b-switch",M),r["default"].component("b-form-field",L),r["default"].component("b-data-value",I["a"]),r["default"].component("b-data-table",K),r["default"].component("b-form-builder",q["a"]),r["default"].component("b-table-builder",V),r["default"].component("avatar-cropper",se),r["default"].component("custom-component",de),r["default"].component("b-json-editor",Ee);var Oe=a("460a"),ye=a("6ad0"),we=a.n(ye);r["default"].prototype.$inflection=v.a,r["default"].use(y["a"]),r["default"].config.productionTip=!1,r["default"].use(O["a"]),r["default"].prototype.$storage=Oe["a"],r["default"].component("BLoading",we.a),r["default"].prototype._=i.a,Object(E["sync"])(u["a"],h["a"]),u["a"].dispatch(u["b"].GET_AUTH),u["a"].dispatch(u["b"].FETCH_LOCALE),new r["default"]({el:"#app",router:h["a"],store:u["a"],i18n:b["a"],watch:{},methods:{},render:function(e){return e(m)},created:function(){}})},5903:function(e,t,a){},"5c24":function(e,t,a){"use strict";(function(e){a("a4d3"),a("e01a"),a("99af"),a("4de4"),a("a15b"),a("d81d"),a("fb6a"),a("b0c0"),a("ac1f"),a("1276"),a("498a");var s=a("3835"),i=a("ade3"),r=a("5530"),n=a("2ef0"),o=a.n(n),l=a("6a29"),c=a("8a2b"),u=a("2f62");t["a"]={components:{BFormBuilder:l["a"],BDataValue:c["a"]},props:{resource:{type:String,required:!0},gridPath:{type:String,default:"grid",required:!1}},data:function(){return{iframeSrc:null,pause:!0,page:1,inputPage:1,perPage:6,sortBy:this.$config.primaryKey,sortDesc:!0,description:"",fields:{},filter:{},choices:{},totalRows:0,items:[],searchFields:{},searchModel:{},where:{},title:"",limitPages:10}},computed:Object(r["a"])({},Object(u["c"])(["site","i18n"]),{},Object(u["b"])(["currentMenu","currentLanguage"]),{actions:function(){return o.a.get(this.fields,"_actions")},header:function(){return"\n        ".concat(this.currentMenu.name||"","\n        <small> ").concat(this.resource.toUpperCase()," </small>\n      ")},with:function(){return o.a.filter(o.a.map(this.fields,(function(e,t){return e.ref&&e.ref.split(".").slice(0,-1).join(".")})))},searchUri:function(){return this.resource},resourceUri:function(){return[this.site.resource_prefix,this.resource].map((function(e){return e.trim("/")})).filter((function(e){return e})).join("/")},gridUri:function(){return[this.site.resource_prefix,this.resource,this.gridPath].filter((function(e){return e})).join("/")},sort:{get:function(){return this.sortBy?Object(i["a"])({},this.sortBy,this.sortDesc?-1:1):null},set:function(e){for(var t in e)this.sortBy=t,this.sortDesc=-1===e}},query:{get:function(){return{sort:this.sort,page:this.page,perPage:this.perPage,with:this.with,where:this.where}},set:function(e){this.sort=e.sort,this.page=e.page,this.perPage=e.perPage,this.where=e.where}}}),watch:{"site.fetched":function(e){e&&this.fetchGrid(!0)},"$route.params.resource":function(){this.inputPage=1,this.pause=!0,this.fetchGrid(!0)},page:"fetch",sort:"fetch",where:"fetch","$route.query.query":function(){this.applyQuery(),this.fetch()}},methods:{goPage:function(){var e=Math.ceil(this.totalRows/this.limitPages);if(this.inputPage<=0||this.inputPage>e)return this.$snotify.warning("请输入正确页码"),this.inputPage=1,void(this.page=1);this.page=this.inputPage},previousPage:function(){this.inputPage>1?(this.inputPage--,this.page=this.inputPage):(this.$snotify.warning("已是第一页"),this.inputPage=1,this.page=1)},nextPage:function(){var e=Math.ceil(this.totalRows/this.limitPages);this.inputPage<e?(this.inputPage++,this.page=this.inputPage):(this.$snotify.warning("后面没有了"),this.inputPage=1,this.page=1)},fetch:function(){var e=this;this.pause||(this.pause=!0,this.$http.get(this.resourceUri,{params:{query:JSON.stringify(this.query)}}).then((function(t){var a=t.data,s=a.data,i=a.total,r=a.perPage,n=a.fields,o=a.searchFields,l=a.searchModel;n&&(e.fields=n),o&&(e.searchFields=o),l&&(e.searchModel=l),e.items=s,e.description=a.description,e.totalRows=i,e.perPage=r,e.pause=!1})))},searchAndExport:function(){var t=this,a=JSON.stringify({where:o.a.clone(this.searchModel),with:o.a.clone(this.with)});this.iframeSrc="",setTimeout((function(){t.iframeSrc="".concat(e.API_URI).concat(t.resourceUri,"/export?query=").concat(a,"&token=").concat(t.$store.state.auth.token)}),50)},fetchGrid:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.query={},this.$http.get(this.gridUri).then((function(a){var s=a.data;e.fields=s.fields,e.fields._actions||!1===e.fields._actions||(e.fields._actions={}),e.fields._actions&&(e.fields._actions.label||(e.fields._actions.label="")),e.searchFields=s.searchFields,e.searchModel=s.searchModel,e.pause=!1,t&&(e.applyQuery(),e.fetch())}))},applyQuery:function(){var e=this.$route.query.query;this.query=e?o.a.isString(e)?JSON.parse(e):e:{}},get:function(e,t){var a=t.split("."),i=Object(s["a"])(a,2),r=i[0],n=i[1];return e[r][n]},show:function(e){this.$router.push({path:this.resource+"/"+e[this.$config.primaryKey]})},edit:function(e){if(2==this.site.grid_style)return this.$router.push({path:"/page/".concat(this.resource,".").concat(e[this.$config.primaryKey],".edit")});this.$router.push({path:this.resource+"/"+e[this.$config.primaryKey]+"/edit"})},remove:function(e){var t=this;window.confirm(this.$t("messages.confirm_delete"))&&this.$http.delete(this.resourceUri+"/"+e[this.$config.primaryKey]).then((function(){t.$snotify.success(t.$t("messages.deleted")),t.fetch()}))},removeAll:function(){var e=this;window.confirm(this.$t("messages.confirm_delete_all"))&&this.$http.delete(this.resourceUri).then((function(){e.$snotify.success(e.$t("messages.deleted_all")),e.fetch()}))},onSearch:function(){this.where=this.searchModel,this.fetch()}},mounted:function(){this.site.fetched&&this.fetchGrid(!0)},created:function(){}}}).call(this,a("c8ba"))},"5da2":function(e,t,a){"use strict";var s=a("93ed"),i=a.n(s);i.a},6155:function(e,t,a){},"6a29":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.model?a("div",[e.inline?a(e.tag,{ref:"form",tag:"component",staticClass:"form form-inline",attrs:{action:e.actionUrl,method:e.method,enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[a("input",{attrs:{type:"hidden",name:"token"},domProps:{value:e.auth.token}}),e._l(e.fields,(function(t,s){return[!1!==t.label?a("label",{key:s,staticClass:"m-1",attrs:{for:"input_"+s}},[e._v(e._s(t.label||e.$inflection.titleize(s)))]):e._e(),a("b-form-field",{key:e.id+"_"+s,staticClass:"m-1 mr-4",attrs:{languages:e.languages,parent:e.parent||e.model,value:e.model[s],id:e.getFieldId(s),name:s,field:t,state:!e.hasError(s)},on:{input:function(t){return e.setValue(s,arguments[0],arguments[1])}}})]})),e._t("actions",[a("b-button",{ref:"submitButton",staticClass:"mr-1",attrs:{type:"submit",variant:"primary"}},[e._v(e._s(e.submitText))]),e.backText?a("b-button",{attrs:{type:"button",variant:"secondary"},on:{click:function(t){return e.$router.go(-1)}}},[e._v(e._s(e.backText)+" ")]):e._e(),e._t("extra-buttons")])],2):a(e.tag,{ref:"form",tag:"component",staticClass:"form",attrs:{action:e.actionUrl,method:e.method,enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[a("input",{attrs:{type:"hidden",name:"token"},domProps:{value:e.auth.token}}),e.groupBy?a("b-tabs",{staticClass:"my-3",class:{"hide-group-name":e._.get(e.layout,"hideGroupName")}},e._l(e.groupedFields,(function(t,s){return a("b-tab",{key:s,attrs:{title:e._.get(e.layout,"tabs."+s+".name")||s||e.$t("messages.default")}},[a("div",{staticClass:"row form-cols"},[a("b-col",{attrs:{md:e._.get(e.layout,"tabs."+s+".cols",12)}},[a("b-row",{staticClass:"mt-4"},[e._l(t,(function(t,s){return[e.isShowField(t)&&e.model?a("b-form-group",e._b({key:e.id+"_"+s,class:e.getClass(t),attrs:{state:!e.hasError(s),"label-for":"input_"+s,label:!1!==t.label?t.label||e.$inflection.titleize(s):""}},"b-form-group",t,!1),[a("div",{},[a("b-form-field",{class:e.getInputClass(t),attrs:{languages:e.languages,parent:e.parent||e.model,value:e.model[s],name:s,field:t,state:!e.hasError(s),id:"input_"+s},on:{input:function(t){return e.setValue(s,arguments[0],arguments[1])}}})],1)]):e._e()]}))],2)],1),e._.get(e.layout,"tabs."+s+".right")?a("b-col",{attrs:{md:12-e._.get(e.layout,"tabs."+s+".cols",0)}},[a("div",{domProps:{innerHTML:e._s(e._.get(e.layout,"tabs."+s+".right"))}})]):e._e()],1)])})),1):a("div",{staticClass:"row"},[e._l(e.fields,(function(t,s){return[e.isShowField(t)&&e.model?a("b-form-group",e._b({key:[e.id,e.subForm,s].join(),class:e.getClass(t),attrs:{state:!e.hasError(s),"label-for":e.getFieldId(s),label:!1!==t.label?t.label||e.$inflection.titleize(s):""}},"b-form-group",t,!1),[a("div",{},[a("b-form-field",{class:e.getInputClass(t),attrs:{languages:e.languages,parent:e.parent||e.model,value:e.model[s],name:e.getFieldName(s),field:t,state:!e.hasError(s),id:e.getFieldId(s)},on:{input:function(t){return e.setValue(s,arguments[0],arguments[1])}}})],1)]):e._e()]}))],2),e.subForm?e._e():e._t("actions",[a("b-button",{ref:"submitButton",staticClass:"mr-1",attrs:{type:"submit",variant:"primary"}},[e._v(e._s(e.submitText))]),e.backText?a("b-button",{attrs:{type:"button",variant:"secondary"},on:{click:function(t){return e.$router.go(-1)}}},[e._v(e._s(e.backText)+" ")]):e._e()])],2)],1):e._e()},i=[],r=a("d751"),n=r["a"],o=a("2877"),l=Object(o["a"])(n,s,i,!1,null,null,null);t["a"]=l.exports},"6cef":function(e,t,a){},"6e87":function(e,t,a){"use strict";t["a"]={SET_AUTH:"SET_AUTH",GET_AUTH:"GET_AUTH",SET_SITE:"SET_SITE",GO_LOGIN:"GO_LOGIN",SET_PAGE_HEADER:"SET_PAGE_HEADER",FETCH_PAGE_HEADER:"FETCH_PAGE_HEADER",SET_LOCALE:"SET_LOCALE",FETCH_LOCALE:"FETCH_LOCALE",SET_THEME:"SET_THEME",FETCH_SITE:"FETCH_SITE",DOWNLOAD:"DOWNLOAD",SHOW_FILE_BROWSER:"SHOW_FILE_BROWSER",FETCH_ONLINE_FILES:"FETCH_ONLINE_FILES",START_LOADING:"START_LOADING",STOP_LOADING:"STOP_LOADING"}},8242:function(e,t,a){"use strict";var s=a("c34b"),i=a.n(s);i.a},"85ec":function(e,t,a){},"8a2b":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"break-all data-value"},[["html"].includes(e.field.type)?[a("div",{staticClass:" data-value-html",domProps:{innerHTML:e._s(e.value)}})]:["number"].includes(e.field.type)?[a("div",[e._v(e._s(e.value))])]:["image"].includes(e.field.type)?[e.field.multiple?e._l(e.value,(function(t){return a("b-img",e._b({key:t,staticClass:"type-image",attrs:{src:e.preview(t)},on:{click:function(a){return a.stopPropagation(),e.previewInModal(t)}}},"b-img",e.field,!1))})):a("b-img",e._b({staticClass:"type-image",attrs:{src:e.preview(e.value),fluid:""},on:{click:function(t){return t.stopPropagation(),e.previewInModal(e.value)}}},"b-img",e.field,!1))]:["json"].includes(e.field.type)?[a("b-json-pretty",{attrs:{value:e.value}})]:["audio","video"].includes(e.field.type)?[a(e.field.type,{tag:"component",attrs:{src:e.value,controls:""}})]:["file"].includes(e.field.type)?[e.value?a("a",{attrs:{target:"blank",href:e.value}},[a("i",{staticClass:"fa fa-file"}),e._v(" "+e._s(String(e.value).split("/").pop())+" ")]):a("div",{staticClass:"text-muted"})]:["link"].includes(e.field.type)?[a("a",{class:e.field.classes,attrs:{href:e.value,target:e.field.target}},[e.field.icon?a("i",{class:e.field.icon}):e._e(),e._v(" "+e._s(e.value)+" ")])]:["switch","boolean","checkbox"].includes(e.field.type)?[a("b-badge",{attrs:{variant:e.value?"success":"danger"}},[e._v(" "+e._s(e.value?"Yes":"No")+" ")])]:e.field.refLabel?[[e._v(" "+e._s(e._.get(e.model||{},[e.name].concat(e.field.refLabel.split("."))))+" ")]]:e.field.ref?[e.field.multiple?[e._v(" "+e._s(e._.map(e._.get(e.model||{},e.field.ref.split(".")[0]),e.field.ref.split(".")[1]).join(","))+" ")]:e.isIntl?[e._v(" "+e._s(e._.get(e.model||{},e.field.ref.split(".").concat([e.lang])))+" ")]:[e._v(" "+e._s(e._.get(e.model||{},e.field.ref))+" ")]]:e.name===e.pk?[e.value?a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top.d100",modifiers:{hover:!0,top:!0,d100:!0}}],attrs:{title:e.value}},[e._v(" "+e._s(String(e.shortId?String(e.value).substr(-4):e.value).toUpperCase())+" ")]):e._e()]:["date","datetime"].includes(e.field.type)?[e.value?a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top.d100",modifiers:{hover:!0,top:!0,d100:!0}}],attrs:{title:e.value}},[e._.isString(e.value)?[e._v(" "+e._s(e.$d(new Date(e.value),e.timeFormat))+" ")]:e._.isArray(e.value)?[e._v(" "+e._s(e.$d(new Date(e.value[0]),e.timeFormat))+" - "+e._s(e.$d(new Date(e.value[1]),e.timeFormat))+" ")]:e._e()],2):e._e()]:[e._v(" "+e._s(e.value)+" ")],a("b-modal",{attrs:{title:e.field.label},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[a("b-img",{staticClass:"my-2",attrs:{src:e.preview(e.previewValue),center:"",fluid:""}})],1)],2)},i=[],r=(a("caad"),a("b0c0"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("2ef0")),n=a.n(r),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vue-json-pretty",{attrs:{data:e.value,highlightMouseoverNode:!0}})],1)},l=[],c=a("d538"),u=a.n(c),_={name:"b-json-pretty",components:{VueJsonPretty:u.a},props:{value:null}},d=_,f=a("2877"),p=Object(f["a"])(d,o,l,!1,null,null,null),m=p.exports,h={components:{BJsonPretty:m},data:function(){return{previewValue:null,showModal:!1}},props:{field:{required:!0,type:Object},pk:{required:!0,type:Intl},name:{required:!0,type:String},model:{required:!0,type:Object},lang:{},shortId:{required:!1,type:Boolean,default:!1}},computed:{timeFormat:function(){return"long"},isIntl:function(){return this.field.intl||this.field.multilingual},value:function(){var e=n.a.get(this.model||{},this.field.refLabel||this.field.ref||this.name);if(!e)return e;if(["select","select2","radiolist","checkboxlist"].includes(this.field.type)){var t=n.a.mapValues(n.a.keyBy(this.field.options,"value"),"text");return t[e]}return this.lang&&this.isIntl?n.a.get(e,this.lang,null):e}},methods:{previewInModal:function(e){this.showModal=!0,this.previewValue=e},preview:function(e){if(e)return"string"===typeof e?e:e instanceof File?URL.createObjectURL(e):""}}},b=h,g=(a("5da2"),Object(f["a"])(b,s,i,!1,null,null,null));t["a"]=g.exports},9120:function(e,t,a){},9225:function(e,t,a){"use strict";a("4160"),a("d3b7"),a("ac1f"),a("466d"),a("5319"),a("159b"),a("ddb0");var s=a("a026"),i=a("a925"),r=a("ee71"),n=a.n(r);function o(){var e=a("49f8"),t={};return e.keys().forEach((function(a){var s=a.match(/([A-Za-z0-9-_]+)\./i);if(s&&s.length>1){var i=s[1];t[i]=e(a)}})),t}s["default"].use(i["a"]);var l={"en-US":{short:{month:"short",day:"numeric"},long:{month:"short",day:"numeric",hour:"numeric",minute:"numeric"}},"zh-CN":{short:{month:"short",day:"numeric"},long:{month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1}}};t["a"]=new i["a"]({locale:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_I18N_LOCALE||"en-US",fallbackLocale:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_I18N_FALLBACK_LOCALE||"en-US",messages:o(),dateTimeFormats:l,silentTranslationWarn:!0,missing:function(e,t){if(t)return n.a.titleize(t.replace(/^\w+\./,""))}})},"93ed":function(e,t,a){},9741:function(e,t,a){},a18c:function(e,t,a){"use strict";var s,i,r,n,o=a("a026"),l=a("8c4f"),c=a("4360"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[2==e.$store.state.site.grid_style?a("b-data-table",{attrs:{resource:e.resource}}):a("custom-table")],1)},_=[],d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"data-table"},[1===e.site.grid_style?a("div",[a("div",{staticClass:"pb-3"},[!1!==e._.get(e.actions,"toolbar.create")?a("b-btn",{staticClass:"mr-2",attrs:{to:"/rest/"+e.resourceUri+"/create",variant:"secondary"}},[a("i",{staticClass:"icon-plus"}),e._v(" "+e._s(e.$t("actions.create"))+" ")]):e._e(),!1!==e._.get(e.actions,"toolbar.reload")?a("b-btn",{staticClass:"mr-2",attrs:{variant:"success"},on:{click:e.fetchGrid}},[a("i",{staticClass:"icon-reload"}),e._v(" "+e._s(e.$t("actions.reload"))+" ")]):e._e(),e._l(e._.get(e.actions,"toolbar.extra",[]),(function(t){return a("b-btn",e._b({key:t.label,staticClass:"mr-2"},"b-btn",t,!1),[e._v(e._s(t.label))])})),!0===e._.get(e.actions,"toolbar.delete_all")?a("b-btn",{staticClass:"pull-right",attrs:{variant:"second"},on:{click:e.removeAll}},[a("i",{staticClass:"icon-trash"}),e._v(" "+e._s(e.$t("actions.delete_all"))+" ")]):e._e()],2),e._.isEmpty(e.searchFields)?e._e():a("div",{staticClass:"mb-2 data-table-search"},[a("b-form-builder",{attrs:{inline:!0,fields:e.searchFields,action:e.searchUri,submitText:e.$t("actions.search"),backText:"",method:"get","on-submit":e.onSearch},model:{value:e.searchModel,callback:function(t){e.searchModel=t},expression:"searchModel"}},[a("div",{staticClass:"ml-2",attrs:{slot:"extra-buttons"},slot:"extra-buttons"},[e._.get(e.actions,"export")?a("b-button",{attrs:{type:"button",variant:"success"},on:{click:e.searchAndExport}},[e._v(e._s(e.$t("actions.search_and_export")))]):e._e(),a("iframe",{staticStyle:{width:"0",height:"0",border:"none"},attrs:{src:e.iframeSrc}})],1)])],1),e.description?a("div",{domProps:{innerHTML:e._s(e.description)}}):e._e(),a("b-row",[a("b-col",{attrs:{cols:"8"}},[a("b-pagination",{attrs:{limit:e.limitPages,"total-rows":e.totalRows,"per-page":e.perPage},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1),a("b-col",{staticClass:"text-right",attrs:{cols:"4"}},[a("p",[e._v(e._s(e.$t("messages.paginate",{total:e.totalRows})))])])],1)],1):a("div",{staticClass:"table-toolbar style-2"},[a("div",{staticClass:"search-box"},[a("div",{staticClass:"flex"},[e._.isEmpty(e.searchFields)?e._e():a("b-form-builder",{attrs:{inline:!0,fields:e.searchFields,action:e.searchUri,submitText:e.$t("actions.search"),backText:"",method:"get","on-submit":e.onSearch},model:{value:e.searchModel,callback:function(t){e.searchModel=t},expression:"searchModel"}},[a("div",{staticClass:"ml-2",attrs:{slot:"extra-buttons"},slot:"extra-buttons"},[e._.get(e.actions,"export")?a("b-button",{attrs:{type:"button",variant:"success"},on:{click:e.searchAndExport}},[e._v(e._s(e.$t("actions.search_and_export")))]):e._e(),a("iframe",{staticStyle:{width:"0",height:"0",border:"none"},attrs:{src:e.iframeSrc}})],1)]),!1!==e._.get(e.actions,"toolbar.create")?a("b-btn",{attrs:{to:"/page/"+e.resourceUri+".create",variant:"link"}},[a("i",{staticClass:"iconfont icon-xinjianshiti"}),e._v(" "+e._s(e.$t("actions.create"))+" ")]):e._e(),!1!==e._.get(e.actions,"toolbar.reload")?a("b-btn",{attrs:{variant:"link"},on:{click:e.fetchGrid}},[a("i",{staticClass:"iconfont icon-shuaxin"}),e._v(" "+e._s(e.$t("actions.reload"))+" ")]):e._e()],1),a("div",{staticClass:"flex"},[a("div",{staticClass:"result"},[e._v("共"+e._s(e.totalRows)+"个结果")]),a("div",{staticClass:"pagination"},[a("span",{staticClass:"left-arrow iconfont icon-tuichu",on:{click:e.previousPage}}),a("div",{staticClass:"go-page flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputPage,expression:"inputPage"}],attrs:{type:"number"},domProps:{value:e.inputPage},on:{input:function(t){t.target.composing||(e.inputPage=t.target.value)}}}),a("div",[e._v("/"+e._s(0==e.totalRows?1:Math.ceil(e.totalRows/e.limitPages)))]),a("button",{on:{click:e.goPage}},[e._v("GO")])]),a("span",{staticClass:"right-arrow iconfont icon-jinru",on:{click:e.nextPage}})])])])]),a("b-table",{staticClass:"data-table bg-white",attrs:{"sort-by":e.sortBy,"sort-desc":e.sortDesc,"no-local-sorting":!0,fields:e.fields,items:e.items},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t}},scopedSlots:e._u([e._l(e.fields,(function(t,s){return{key:s,fn:function(i){return[a("b-data-value",{key:s,attrs:{field:t,lang:e.currentLanguage,name:s,model:i.item,"short-id":""}})]}}})),{key:"_actions",fn:function(t){return[e._l(e._.get(e.actions,"addon"),(function(t,s){return a("b-btn",e._b({key:s,staticClass:"mr-2",attrs:{size:"sm"}},"b-btn",t,!1),[e._v(e._s(t.label))])})),!1!==e._.get(e.actions,"buttons.show")?a("b-btn",{staticClass:"mr-2",attrs:{size:"sm",variant:"success"},on:{click:function(a){return a.stopPropagation(),e.show(t.item)}}},[a("i",{staticClass:"icon-eye"}),e._v(" "+e._s(e.$t("actions.view"))+" ")]):e._e(),!1!==e._.get(e.actions,"buttons.edit")?a("b-btn",{staticClass:"mr-2",attrs:{size:"sm",variant:"primary"},on:{click:function(a){return a.stopPropagation(),e.edit(t.item)}}},[a("i",{staticClass:"icon-pencil"}),e._v(" "+e._s(e.$t("actions.edit"))+" ")]):e._e(),!1!==e._.get(e.actions,"buttons.delete")?a("b-btn",{staticClass:"mr-2",attrs:{size:"sm",variant:"second"},on:{click:function(a){return a.stopPropagation(),e.remove(t.item)}}},[a("i",{staticClass:"icon-trash"}),e._v(" "+e._s(e.$t("actions.delete"))+" ")]):e._e()]}}],null,!0)},[e._l(e._.omit(e.fields,"_actions"),(function(t,s){return a("template",{slot:"HEAD_"+s},[a("div",{key:s,class:{"text-right":["number"].includes(t.type)}},[e._v(e._s(t.label||s))])])}))],2),1===e.site.grid_style?a("div",[a("b-row",[a("b-col",{attrs:{cols:"8"}},[a("b-pagination",{attrs:{limit:e.limitPages,"total-rows":e.totalRows,"per-page":e.perPage},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1),a("b-col",{staticClass:"text-right",attrs:{cols:"4"}},[a("p",[e._v(e._s(e.$t("messages.paginate",{total:e.totalRows})))])])],1)],1):a("div",[a("div",{staticClass:"footer-pagination"},[a("div",{staticClass:"flex"},[a("div",{staticClass:"result"},[e._v("共"+e._s(e.totalRows)+"个结果")]),a("div",{staticClass:"pagination"},[a("span",{staticClass:"left-arrow iconfont icon-tuichu",on:{click:e.previousPage}}),a("div",{staticClass:"go-page flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputPage,expression:"inputPage"}],attrs:{type:"number"},domProps:{value:e.inputPage},on:{input:function(t){t.target.composing||(e.inputPage=t.target.value)}}}),a("div",[e._v("/"+e._s(0==e.totalRows?1:Math.ceil(e.totalRows/e.limitPages)))]),a("button",{on:{click:e.goPage}},[e._v("GO")])]),a("span",{staticClass:"right-arrow iconfont icon-jinru",on:{click:e.nextPage}})])])])])],1)},f=[],p=a("5c24"),m=p["a"],h=a("2877"),b=Object(h["a"])(m,d,f,!1,null,null,null),g=b.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"custom-table"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col col-md-12"},[!1!==e._.get(e.actions,"toolbar.create")?a("b-btn",{staticClass:"mr-2",attrs:{to:e.uri+"/create",variant:"secondary"}},[a("i",{staticClass:"icon-plus"}),e._v(" "+e._s(e.$t("actions.create"))+" ")]):e._e(),!1!==e._.get(e.actions,"toolbar.reload")?a("b-btn",{staticClass:"mr-2",attrs:{variant:"success"},on:{click:e.fetch}},[a("i",{staticClass:"icon-reload"}),e._v(" "+e._s(e.$t("actions.reload"))+" ")]):e._e(),e._l(e._.get(e.actions,"toolbar.extra",[]),(function(t){return a("b-btn",e._b({key:t.label,staticClass:"mr-2"},"b-btn",t,!1),[e._v(e._s(t.label)+" ")])}))],2)]),a("div",{},[a("div",{staticClass:"my-2"},[e._.keys(e.table.searchFields).length>0?a("b-form-builder",{attrs:{onSubmit:e.doSearch,"back-text":"",inline:"","submit-text":e.$t("actions.search"),fields:e.table.searchFields},model:{value:e.table.searchModel,callback:function(t){e.$set(e.table,"searchModel",t)},expression:"table.searchModel"}},[a("div",{staticClass:"ml-2",attrs:{slot:"extra-buttons"},slot:"extra-buttons"},[this.export?a("b-button",{attrs:{type:"button",variant:"success"},on:{click:e.searchAndExport}},[e._v(e._s(e.$t("actions.search_and_export"))+" ")]):e._e()],1)]):e._e()],1),a("div",{staticClass:"row align-items-center"},[a("div",{staticClass:"col-md-8"},[a("b-pagination",{attrs:{limit:e.pageLimit,"total-rows":e.total,"per-page":e.perPage},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1),a("div",{staticClass:"col-md-4 form-inline justify-content-end"},[a("b-select",{staticClass:"mx-2",attrs:{options:e.pages},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}}),a("span",[e._v(e._s(e.$t("messages.paginate",{total:e.total})))])],1)]),e.table.fields?a("b-table",{ref:"table",staticClass:"data-table",attrs:{items:e.fetchItems,fields:e.columns,selectable:"","per-page":e.perPage,"select-mode":e.selectModel,"current-page":e.currentPage,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"sort-direction":e.sortDirection},on:{"row-selected":e.onRowSelected,"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t}},scopedSlots:e._u([{key:"cell()",fn:function(t){return[["datetime","date"].includes(t.field.type)?[e._v(" "+e._s(e.$d(new Date(t.value),"long"))+" ")]:["image"].includes(t.field.type)?[a("b-img",{staticClass:"type-image",attrs:{width:"50px",src:t.value,fluid:""}})]:["link"].includes(t.field.type)?[a("a",{class:t.field.classes,attrs:{href:t.value,target:t.field.target}},[t.field.icon?a("i",{class:t.field.icon}):e._e(),e._v(" "+e._s(t.value)+" ")])]:["switch","boolean","checkbox"].includes(t.field.type)?[a("b-badge",{attrs:{variant:t.value?"success":"danger"}},[e._v(" "+e._s(t.value?"Yes":"No")+" ")])]:["html"].includes(t.field.type)?[a("div",{staticClass:" data-value-html",domProps:{innerHTML:e._s(t.value)}})]:["select","select2","radiolist","checkboxlist"].includes(t.field.type)?[e._v(" "+e._s(e._.find(t.field.options,{value:t.value}).text)+" ")]:[a("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"200px"}},[e._v(" "+e._s(t.value)+" ")])]]}},e._l(e.table.fields,(function(t,s){return{key:s,fn:function(i){return[a("b-data-value",{key:s,attrs:{field:t,name:s,model:i.item,pk:e.pk,"short-id":""}})]}}})),{key:"cell(_actions)",fn:function(t){return[e._l(e.actions,(function(s,i){return a("b-button",e._b({directives:[{name:"show",rawName:"v-show",value:s.label,expression:"field.label"}],key:i,staticClass:"mr-1",attrs:{to:e._.template(s.to)(t),size:"sm"}},"b-button",s,!1),[e._v(e._s(s.label)+" ")])})),!1!==e.actions.edit?a("b-btn",{staticClass:"mr-1",attrs:{variant:"success",size:"sm",to:e.uri+"/"+t.item[e.pk]}},[e._v(e._s(e.$t("actions.view"))+" ")]):e._e(),!1!==e.actions.edit?a("b-btn",{staticClass:"mr-1",attrs:{variant:"primary",size:"sm",to:e.uri+"/"+t.item[e.pk]+"/edit"}},[e._v(e._s(e.$t("actions.edit"))+" ")]):e._e(),!1!==e.actions.delete?a("b-btn",{attrs:{size:"sm"},on:{click:function(a){return a.stopPropagation(),e.remove(t.item[e.pk])}}},[e._v(e._s(e.$t("actions.delete"))+" ")]):e._e()]}}],null,!0)}):e._e(),a("div",{staticClass:"form-inline my-2"},[a("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:e.selectAllRows}},[e._v(e._s(e.$t("actions.select_all")))]),a("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:e.clearSelected}},[e._v(e._s(e.$t("actions.clear_selected")))]),a("b-form-select",{staticClass:"mr-1",attrs:{size:"sm",options:e.bulkActions},model:{value:e.selectBulkAction,callback:function(t){e.selectBulkAction=t},expression:"selectBulkAction"}}),a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:e.submitBulk}},[e._v(e._s(e.$t("actions.submit")))])],1),a("div",{staticClass:"row align-items-center"},[a("div",{staticClass:"col-md-10"},[a("b-pagination",{attrs:{limit:e.pageLimit,"total-rows":e.total,"per-page":e.perPage},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1),a("div",{staticClass:"col-md-2 text-right"},[e._v(e._s(e.$t("messages.paginate",{total:e.total})))])])],1)])},E=[],O=(a("99af"),a("4de4"),a("d81d"),a("4fad"),a("ac1f"),a("5319"),a("1276"),a("bf19"),a("ade3")),y=a("3835"),w=a("5530"),C=a("2f62"),P=a("6e87"),k=a("2ef0"),D=a.n(k),M=a("21a6"),x={components:{},props:{},data:function(){return{init:!1,loaded:!1,table:{},modes:["multi","single","range"],selectModel:"range",total:0,pageLimit:10,currentPage:1,sortBy:this.pk,sortDesc:!0,sortDirection:null,perPage:10,where:{},selected_pk_list:[],bulkActions:{},selectBulkAction:null,pages:[10,50,100]}},watch:{"$route.query":function(e){this.applyRouteQuery()},"$route.params":function(e){this.applyRouteQuery(),this.fetch()}},computed:Object(w["a"])({},Object(C["c"])(["site","i18n","auth"]),{},Object(C["b"])(["currentLanguage"]),{columns:function(){return Object.entries(this.table.fields).map((function(e){var t=Object(y["a"])(e,2),a=t[0],s=t[1];return Object(w["a"])({key:a},s)}))},pk:function(){return D.a.get(this.table,"pk")},export:function(){return D.a.get(this.table,"export")},populate:function(){return D()(this.table.fields||{}).map("ref").filter().map((function(e){return e.split(".").shift()})).uniq().toJSON()},actions:function(){return D.a.get(this.table,"fields._actions",{})},resource:function(){return this.$route.params.resource},uri:function(){return this.site.resource_prefix+"/"+this.resource.replace(/\./g,"/")}}),methods:{submitBulk:function(){var e=this;window.confirm(this.$t("messages.confirm_bulk_action"))&&this.$http.post(this.uri+"/bulk/"+this.selectBulkAction,{pk_list:this.selected_pk_list}).then((function(){e.$snotify.success(e.$t("messages.bulk_success")),e.fetch()}))},selectAllRows:function(){this.$refs.table.selectAllRows()},onRowSelected:function(e){var t=this;this.selected_pk_list=D.a.map(e,(function(e){return e[t.pk]}))},clearSelected:function(){this.$refs.table.clearSelected()},doSearch:function(e){this.where=D.a.omitBy(e,(function(e){return null===e})),this.$refs.table.refresh()},searchAndExport:function(){var e=this,t=JSON.stringify({where:D.a.clone(this.table.searchModel),with:D.a.clone(this.populate)});this.$http.get(this.uri+"/export",{responseType:"arraybuffer",params:{query:t}}).then((function(t){var a=new Blob([t.data]);Object(M["saveAs"])(a,"".concat(e.resource,".xlsx"))}))},applyRouteQuery:function(){var e=JSON.parse(this.$route.query.query||"{}"),t=e.sort,a=void 0===t?{}:t,s=e.page,i=void 0===s?1:s,r=e.where,n=void 0===r?{}:r,o=Object.entries(a).pop()||[],l=Object(y["a"])(o,2),c=l[0],u=l[1];c&&(this.sortBy=c),u&&(this.sortDesc=-1===u),this.total=i*this.perPage,this.currentPage=i,this.where=n,this.init=!0},remove:function(e){var t=this;window.confirm("是否删除?")&&this.$http.delete("".concat(this.uri,"/").concat(e)).then((function(e){t.$snotify.success("删除成功"),t.$refs.table.refresh()}))},fetchItems:function(e){var t=this,a=D.a.merge({},D.a.get(this.table,"query"),{page:e.currentPage,size:e.perPage,sort:Object(O["a"])({},e.sortBy,this.sortDesc?-1:1),where:this.where,with:this.populate});return this.init?this.$http.get(this.uri,{params:{query:JSON.stringify(a)}}).then((function(e){var a=e.data,s=a.total,i=a.data;return t.total=s,i})).catch((function(e){return[]})):[]},fetch:function(){var e=this;this.init=!1,this.$http.get(this.uri+"/grid").then((function(t){D.a.mapValues(t.data.bulk_actions,(function(t){t.text=e.$t("actions.".concat(t.text))})),e.bulkActions=t.data.bulk_actions,D.a.mapValues(t.data.fields,(function(e){e.thClass="bg-light"})),e.table=t.data,!1!==D.a.get(e.table,"fields._actions")&&D.a.set(e.table,"fields._actions.label",e.$t("actions.actions")),e.init=!0,e.$refs.table&&e.$refs.table.refresh()})).catch((function(t){e.table={}}))}},mounted:function(){},created:function(){this.applyRouteQuery(),this.fetch()}},$=x,A=Object(h["a"])($,v,E,!1,null,null,null),T=A.exports,j={name:"resource-index",components:{BDataTable:g,CustomTable:T},data:function(){return{}},computed:{resource:function(){return this.$route.params.resource}},methods:{},created:function(){}},L=j,I=Object(h["a"])(L,u,_,!1,null,null,null),S=I.exports,B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-data-form",{attrs:{resource:e.resource,id:e.id,languages:e.$store.state.site.languages}})],1)},U=[],R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"data-form"},[a("div",{staticClass:"row d-none"},[a("div",{staticClass:"col col-md-8"},[(e.model[e.pk],e._e())]),a("div",{staticClass:"col col-md-4 text-right hidden-sm-down"},[a("b-btn",{on:{click:function(t){return e.$router.go(-1)}}},[e._v(e._s(e.$t("actions.back")))]),a("b-btn",{attrs:{variant:"primary"},on:{click:function(t){return e.$refs.form.submitForm()}}},[e._v(e._s(e.$t("actions.save")))])],1)]),e.loaded?a("b-form-builder",{ref:"form",attrs:{languages:e.$store.state.site.languages,"group-by":"group",auth:e.auth,layout:e.layout,fields:e.fields,action:e.resourceUri,method:e.method},on:{success:e.onSuccess},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}):e._e()],1)},W=[],K=(a("a15b"),{components:{},props:{resource:{type:String,required:!0},id:{default:"",required:!0},formPath:{type:String,default:"form",required:!1}},data:function(){return{redirect:-1,loaded:!1,choices:{},fields:{},model:{},errors:[],pk:null,tag:"b-card",header:"\n      ".concat(D.a.get(this.currentMenu,"name","")||"","\n      <small> ").concat(this.resource.toUpperCase()," </small>\n    ")}},watch:{id:"fetchForm","site.fetched":function(e){e&&this.fetchForm(!0)}},computed:Object(w["a"])({resourceUri:function(){var e=[this.site.resource_prefix,this.resource,this.id].filter((function(e){return e})).join("/"),t=this.$route.params.group;return t&&(e+="?group="+t),e},formUri:function(){var e=[this.site.resource_prefix,this.resource,this.formPath].filter((function(e){return e})).join("/");return e+="?id="+(this.id||""),e},isNew:function(){return!this.id},method:function(){return this.isNew?"post":"put"},with:function(){return D.a.filter(D.a.map(this.fields,(function(e){return e.ref&&e.ref.split(".").shift()})))}},Object(C["c"])(["nav","auth","site"]),{},Object(C["b"])(["currentMenu"])),methods:{fetch:function(){var e=this;if(this.isNew)return this.model={},void(this.loaded=!0);this.$http.get(this.resourceUri,{params:{query:{with:this.with}}}).then((function(t){var a=t.data;e.loaded=!0,e.model=a}))},fetchForm:function(){var e=this;this.$http.get(this.formUri,{params:this.$route.params}).then((function(t){var a=t.data;e.fields=a.fields,e.pk=a.pk,e.layout=a.layout,e.redirect=a.redirect,a.header&&(e.header=a.header),a.tag&&(e.tag=a.tag),e.fetch()}))},onSuccess:function(){!1===this.redirect?this.fetchForm():-1!==this.redirect&&this.redirect?this.$router.go(this.redirect):this.$router.go(-1)}},mounted:function(){this.site.fetched&&this.fetchForm()},created:function(){}}),q=K,F=Object(h["a"])(q,R,W,!1,null,null,null),N=F.exports,H={name:"resource-edit",components:{BDataForm:N},data:function(){return{}},computed:{id:function(){return this.$route.params.id},resource:function(){return this.$route.params.resource}},watch:{},methods:{},created:function(){}},z=H,G=Object(h["a"])(z,B,U,!1,null,null,null),V=G.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-row",[a("b-col",{attrs:{cols:"12",xl:"12"}},[a("b-data-view",{attrs:{resource:e.resource,id:e.id}})],1)],1)],1)},Q=[],Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-view"},[a("div",{staticClass:"data-view"},[e.model["__str__"]?a("legend",[e._v(e._s(e.$t("actions.view"))+": "+e._s(e.model["__str__"]))]):e._e(),a("table",{staticClass:"table "},[a("tbody",e._l(e.fields,(function(t,s){return a("tr",{key:s},[a("th",{staticStyle:{"min-width":"120px"}},[e._v(e._s(t.label||s))]),a("td",[["array"].includes(t.type)?a("div",[a("b-table",{attrs:{items:e.model[s],fields:t.fields},scopedSlots:e._u([e._l(t.fields,(function(t,s){return{key:s,fn:function(i){return[a("b-data-value",{key:s,attrs:{lang:e.currentLanguage,field:t,name:s,model:i.item}})]}}}))],null,!0)})],1):a("div",[a("b-data-value",{attrs:{lang:e.currentLanguage,field:t,name:s,model:e.model}})],1)])])})),0)])]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("b-btn",{on:{click:function(t){return e.$router.go(-1)}}},[e._v(e._s(e.$t("actions.back")))])],1)])},X=[],Z=a("8a2b"),ee={components:{BDataValue:Z["a"]},props:{resource:{type:String,required:!0},id:{default:"",required:!0},viewPath:{type:String,default:"view",required:!1}},data:function(){return{choices:{},fields:{},model:{},errors:[],items:[],pk:null}},computed:Object(w["a"])({resourceUri:function(){return[this.site.resource_prefix,this.resource,this.id].filter((function(e){return e})).join("/")},viewUri:function(){var e=[this.site.resource_prefix,this.resource,this.viewPath].filter((function(e){return e})).join("/");return e+="?id="+(this.id||""),e},with:function(){return D.a.filter(D.a.map(this.fields,(function(e){return e.ref&&e.ref.replace(/\.\w+$/,"")})))}},Object(C["c"])(["site"]),{},Object(C["b"])(["currentMenu","currentLanguage"]),{header:function(){return"\n      ''\n      <small> ".concat(this.resource.toUpperCase()," </small>\n    ")}}),methods:{fetch:function(){var e=this;this.$http.get(this.resourceUri,{params:{query:{with:this.with}}}).then((function(t){var a=t.data;e.model=a}))},fetchView:function(){var e=this;this.$http.get(this.viewUri).then((function(t){var a=t.data;e.fields=a.fields,e.pk=a.pk,delete e.fields._actions,e.fetch()}))}},watch:{id:"fetchForm","site.fetched":function(e){e&&this.fetchView(!0)}},mounted:function(){},created:function(){this.site.fetched&&this.fetchView()}},te=ee,ae=Object(h["a"])(te,Y,X,!1,null,null,null),se=ae.exports,ie={components:{BDataView:se},data:function(){return{}},computed:{id:function(){return this.$route.params.id},resource:function(){return this.$route.params.resource}},methods:{},created:function(){}},re=ie,ne=Object(h["a"])(re,J,Q,!1,null,null,null),oe=ne.exports,le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-row",[a("b-col",{attrs:{cols:"6",lg:"8"}},[a("b-card",{attrs:{header:e.resource}},[a("b-data-chart",{attrs:{resource:e.resource,id:e.id,group:e.group}})],1)],1)],1)],1)},ce=[],ue={props:{resource:{type:String,required:!0},group:{type:String,required:!0}},data:function(){return{options:{}}},computed:{resourceUri:function(){return this.resource+"/stat"}},methods:{fetch:function(){var e=this;this.$http.get(this.resourceUri,{params:{group:this.group}}).then((function(t){var a=t.data;e.options=a,e.renderChart(e.options)}))}},mounted:function(){this.fetch()}},_e=ue,de=Object(h["a"])(_e,s,i,!1,null,null,null),fe=de.exports,pe={name:"resource-stat",components:{BDataChart:fe},data:function(){return{}},computed:{id:function(){return this.$route.params.id},resource:function(){return this.$route.params.resource},group:function(){return this.$route.query.group||"status"}},methods:{},created:function(){}},me=pe,he=Object(h["a"])(me,le,ce,!1,null,null,null),be=he.exports,ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-card",{attrs:{header:e.form.header}},[a("div",{staticClass:"custom-form"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col col-md-8"},[a("legend",[e._v(e._s(e.form.title))])]),a("div",{staticClass:"col col-md-4 text-right hidden-sm-down"},[a("b-btn",{on:{click:function(t){return e.$router.go(-1)}}},[e._v(e._s(e.$t("actions.back")))]),a("b-btn",{attrs:{variant:"primary"},on:{click:function(t){return e.$refs.form.handleSubmit()}}},[e._v(e._s(e.form.submitText||e.$t("actions.save")))])],1)]),e.form.fields?a("b-form-builder",e._b({ref:"form",attrs:{auth:e.auth,fields:e.form.fields},on:{success:e.onSuccess}},"b-form-builder",e.form,!1)):e._e()],1)])},ve=[],Ee=a("1484"),Oe=Ee["a"],ye=Object(h["a"])(Oe,ge,ve,!1,null,null,null),we=ye.exports,Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("custom-component",{attrs:{config:e.page}})],1)},Pe=[],ke=a("c3c7"),De=ke["a"],Me=(a("bf45"),Object(h["a"])(De,Ce,Pe,!1,null,null,null)),xe=Me.exports,$e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app login-container",style:e.site.login_style},[a("div",{staticClass:"col-md-7 mt-5"},[a("div",{staticClass:"card-group"},[a("div",{staticClass:"card p-4"},[a("div",{staticClass:"card-body"},[a("h1",[e._v(e._s(e.$t("actions.login")))]),a("img",{staticStyle:{"margin-bottom":"20px"},attrs:{src:e.site.login_logo}}),a("p",{staticClass:"text-muted"},[e._v(e._s(e.$t("messages.login_please")))]),a("b-form-builder",{attrs:{action:"login",fields:e.fields,submitText:e.$t("actions.login"),backText:""},on:{success:e.onSuccess},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)]),a("div",{staticClass:"card text-white bg-primary py-5 d-md-down-none",style:e.site.desbg_style},[a("div",{staticClass:"card-body text-center align-items-center d-flex"},[a("div",{staticStyle:{width:"100%"}},[a("h2",[e._v(e._s(e.site.name||"FASTAPI ADMIN")+" - "+e._s(e.$t("messages.dashboard")))]),a("p",[e._v(e._s(e.site.login_description||e.$t("messages.login_description")))])])])])]),a("p",{staticClass:"text-muted m-4 text-center"},[e._v(e._s(e.site.login_footer||e.$t("messages.login_footer")))]),a("locale-switcher",{staticClass:"text-center"})],1)])},Ae=[],Te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.site.locale_switcher?a("div",{staticClass:"py-2"},e._l(Object.keys(e.$i18n.messages),(function(t){return a("b-button",{key:t,staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(a){return e.changeLocale(t)}}},[e._v(e._s(e._f("ucfirst")(t)))])})),1):e._e()},je=[],Le=(a("fb6a"),{computed:Object(w["a"])({},Object(C["c"])(["site"])),filters:{ucfirst:function(e){return String(e)[0].toUpperCase()+String(e).slice(1)}},methods:{changeLocale:function(e){this.$store.commit(P["a"].SET_LOCALE,e)}}}),Ie=Le,Se=Object(h["a"])(Ie,Te,je,!1,null,null,null),Be=Se.exports,Ue={name:"Login",components:{LocaleSwitcher:Be},computed:Object(w["a"])({},Object(C["c"])(["auth","site"]),{fields:function(){return{username:{label:this.$t("fields.username"),placeholder:this.$t("fields.username"),icon:"icon-user"},password:{label:this.$t("fields.password"),placeholder:this.$t("fields.password"),icon:"icon-lock",type:"password"}}}}),data:function(){return{model:{username:"",password:""},errors:[]}},methods:{onSuccess:function(e){this.$store.commit(c["b"].SET_AUTH,e),this.$store.dispatch(c["b"].FETCH_SITE),this.$router.push({path:e.redirect||"/"})}},mounted:function(){}},Re=Ue,We=(a("206d"),Object(h["a"])(Re,$e,Ae,!1,null,null,null)),Ke=We.exports,qe={mounted:function(){this.$store.commit(P["a"].SET_AUTH,{}),this.$store.dispatch(P["a"].GO_LOGIN)}},Fe=qe,Ne=Object(h["a"])(Fe,r,n,!1,null,null,null),He=Ne.exports,ze=function(){var e,t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("b-row",[s("b-col",{class:(e={},e["fold-"+t.foldLevel]=!0,e),attrs:{cols:6,md:"3",lg:"2",xl:"2"}},[s("b-sidebar",{attrs:{collapsed:t.collapsed}})],1),s("b-col",{staticStyle:{"overflow-x":"auto"}},[s("main",{staticClass:"pt-3"},[s("b-loading",{staticStyle:{height:"100vh"},attrs:{active:t.$store.state.loading&&t.$store.state.site.enable_loading,spinner:"bar-fade-scale"}}),t._e(),s("div",{},[s("custom-component",{attrs:{config:t.$store.state.site.header}}),s("div",{staticClass:"px-2"},[s("div",{staticClass:"page-header h2"},[s("b-btn",{staticClass:"mr-2",attrs:{variant:"light"},on:{click:t.toggleSidebar}},[s("i",{staticClass:"icon-menu"})]),t.$store.state.site.page_header?s("span",{domProps:{innerHTML:t._s(t.$store.state.site.page_header)}}):t._e()],1),s("div",{staticClass:"page-body"},[s("router-view",{staticClass:"animated fadeIn"})],1)])],1)],1)])],1),s("b-row",[s("b-footer")],1)],1)},Ge=[],Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"app-header navbar"},[a("button",{staticClass:"navbar-toggler mobile-sidebar-toggler d-lg-none",attrs:{type:"button"},on:{click:e.mobileSidebarToggle}},[a("span",{staticClass:"navbar-toggler-icon"})]),a("b-link",{staticClass:"navbar-brand",attrs:{to:"/"}}),a("button",{staticClass:"navbar-toggler sidebar-toggler d-md-down-none",attrs:{type:"button"},on:{click:e.sidebarToggle}},[a("span",{staticClass:"navbar-toggler-icon"})]),a("b-navbar-nav",{staticClass:"d-md-down-none",attrs:{"is-nav-bar":""}},[a("b-nav-item",{staticClass:"px-3"},[e._v("Dashboard")]),a("b-nav-item",{staticClass:"px-3"},[e._v("Users")]),a("b-nav-item",{staticClass:"px-3"},[e._v("Settings")])],1),a("b-navbar-nav",{staticClass:"ml-auto",attrs:{"is-nav-bar":""}},[a("b-nav-item",{staticClass:"d-md-down-none"},[a("i",{staticClass:"icon-bell"}),a("b-badge",{attrs:{pill:"",variant:"danger"}},[e._v("5")])],1),a("b-nav-item",{staticClass:"d-md-down-none"},[a("i",{staticClass:"icon-list"})]),a("b-nav-item",{staticClass:"d-md-down-none"},[a("i",{staticClass:"icon-location-pin"})]),a("b-nav-item-dropdown",{attrs:{right:"","no-caret":""}},[a("template",{slot:"button-content"},[a("img",{staticClass:"img-avatar",attrs:{src:"static/img/avatars/6.jpg",alt:"admin@bootstrapmaster.com"}})]),a("b-dropdown-header",{staticClass:"text-center",attrs:{tag:"div"}},[a("strong",[e._v("Account")])]),a("b-dropdown-item",[a("i",{staticClass:"fa fa-bell-o"}),e._v(" Updates"),a("b-badge",{attrs:{variant:"info"}},[e._v(e._s(e.itemsCount))])],1),a("b-dropdown-item",[a("i",{staticClass:"fa fa-envelope-o"}),e._v(" Messages"),a("b-badge",{attrs:{variant:"success"}},[e._v(e._s(e.itemsCount))])],1),a("b-dropdown-item",[a("i",{staticClass:"fa fa-tasks"}),e._v(" Tasks"),a("b-badge",{attrs:{variant:"danger"}},[e._v(e._s(e.itemsCount))])],1),a("b-dropdown-item",[a("i",{staticClass:"fa fa-comments"}),e._v(" Comments"),a("b-badge",{attrs:{variant:"warning"}},[e._v(e._s(e.itemsCount))])],1),a("b-dropdown-header",{staticClass:"text-center",attrs:{tag:"div"}},[a("strong",[e._v("Settings")])]),a("b-dropdown-item",[a("i",{staticClass:"fa fa-user"}),e._v(" Profile")]),a("b-dropdown-item",[a("i",{staticClass:"fa fa-wrench"}),e._v(" Settings")]),a("b-dropdown-item",[a("i",{staticClass:"fa fa-usd"}),e._v(" Payments"),a("b-badge",{attrs:{variant:"default"}},[e._v(e._s(e.itemsCount))])],1),a("b-dropdown-item",[a("i",{staticClass:"fa fa-file"}),e._v(" Projects"),a("b-badge",{attrs:{variant:"primary"}},[e._v(e._s(e.itemsCount))])],1),a("b-dropdown-divider"),a("b-dropdown-item",[a("i",{staticClass:"fa fa-shield"}),e._v(" Lock Account")]),a("b-dropdown-item",[a("i",{staticClass:"fa fa-lock"}),e._v(" Logout")])],2)],1),a("button",{staticClass:"navbar-toggler aside-menu-toggler d-md-down-none",attrs:{type:"button"},on:{click:e.asideToggle}},[a("span",{staticClass:"navbar-toggler-icon"})])],1)},Je=[],Qe={name:"header",components:{},data:function(){return{itemsCount:3}},methods:{sidebarToggle:function(e){e.preventDefault(),document.body.classList.toggle("sidebar-hidden")},sidebarMinimize:function(e){e.preventDefault(),document.body.classList.toggle("sidebar-minimized")},mobileSidebarToggle:function(e){e.preventDefault(),document.body.classList.toggle("sidebar-mobile-show")},asideToggle:function(e){e.preventDefault(),document.body.classList.toggle("aside-menu-hidden")}}},Ye=Qe,Xe=Object(h["a"])(Ye,Ve,Je,!1,null,null,null),Ze=(Xe.exports,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pt-3 pl-3"},[a("div",{staticClass:"text-center top"},[e.site.logo?a("a",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}],attrs:{href:e.site.url,target:"_blank"}},[a("b-img",{staticClass:"site-logo",attrs:{src:e.site.logo,fluid:""}})],1):e._e(),e.auth.user.avatar?a("b-img",{staticClass:"m-2",attrs:{rounded:"circle",src:e.auth.user.avatar,height:"70","blank-color":"#777",alt:"avatar"}}):e._e(),!1!==e.site.sidebar_userinfo?a("div",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}],staticClass:"my-3"},[a("h5",{staticStyle:{"letter-spacing":"2px"}},[e._v(e._s(e.site.name))]),e.auth.user?[e.auth.user.badge?a("b-badge",{staticClass:"text-uppercase mr-1"},[e._v(e._s(e.auth.user.badge))]):e._e(),a("span",[e._v(e._s(e.auth.user.username))])]:e._e()],2):a("div"),a("locale-switcher",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}]}),a("theme-switcher",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}]})],1),a("div",{attrs:{slot:"header"},slot:"header"}),a("b-nav",{staticClass:"sidebar-nav",attrs:{pills:"",vertical:""}},[e._l(e.site.menus,(function(t,s){var i,r;return[t.title?a("b-nav-text",{key:s},[a("small",{staticClass:"text-muted"},[a("b",[e._v(e._s(t.name))])])]):t.children?a("b-nav",{key:s,attrs:{vertical:""}},e._l(t.children,(function(t){return a("b-nav-item",{key:t.name,attrs:{to:t.url}},[a("i",{staticClass:"mr-1",class:t.icon}),a("span",[e._v(e._s(t.name))]),t.badge?a("b-badge",e._b({},"b-badge",t.badge,!1),[e._v(e._s(t.badge.text))]):e._e()],1)})),1):t.external?a("b-nav-item",{key:s,attrs:{active:e.$route.path===t.url,target:"_blank",href:t.url}},[a("i",{class:(i={"mr-2":!e.collapsed},i[t.icon]=!0,i)}),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}]},[e._v(e._s(t.name))]),t.badge?a("b-badge",e._b({},"b-badge",t.badge,!1),[e._v(e._s(t.badge.text))]):e._e()],1):a("b-nav-item",{key:s,attrs:{active:e.$route.path===t.url,to:t.url}},[a("i",{class:(r={"mr-2":!e.collapsed},r[t.icon]=!0,r)}),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}]},[e._v(e._s(t.name))]),t.badge?a("b-badge",e._b({},"b-badge",t.badge,!1),[e._v(e._s(t.badge.text))]):e._e()],1)]})),e._t("default")],2),a("p")],1)}),et=[],tt=(a("4160"),a("b0c0"),a("159b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.$store.state.site.theme_switcher?a("div",{staticClass:"m-4"},[a("b-select",{attrs:{options:e.themeOptions},model:{value:e.theme,callback:function(t){e.theme=t},expression:"theme"}})],1):e._e()}),at=[],st={computed:{theme:{get:function(){return this.$store.state.site.theme},set:function(e){this.$store.commit(P["a"].SET_THEME,e)}}},data:function(){return{themeOptions:"\n      cerulean  darkly    litera    materia   sandstone slate     superhero\n      cosmo     flatly    lumen     minty     simplex   solar     united\n      cyborg    journal   lux       pulse     sketchy   spacelab  yeti\n      ".split(/\s+/)}},created:function(){this.theme=this.$storage.get("theme")||"cosmo"}},it=st,rt=Object(h["a"])(it,tt,at,!1,null,null,null),nt=rt.exports,ot={name:"sidebar",props:{collapsed:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(w["a"])({},Object(C["c"])(["auth","site"]),{menus:function(){var e=[],t=[];for(var a in this.site.menus.forEach((function(e,a){e.title&&t.push(parseInt(a))})),t)e.push({name:this.site.menus[t[a]].name,children:this.site.menus.slice(t[a]+1,t[parseInt(a)+1])});return e}}),components:{LocaleSwitcher:Be,ThemeSwitcher:nt},methods:{toggle:function(e){this.$set(e,"open",!e.open)}}},lt=ot,ct=(a("f203"),Object(h["a"])(lt,Ze,et,!1,null,null,null)),ut=ct.exports,_t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ml-auto"},[e.site.footer?a("footer",{domProps:{innerHTML:e._s(e.site.footer)}}):a("footer",[e._m(0)])])},dt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"ml-auto"},[e._v(" GitHub "),a("a",{attrs:{href:"https://github.com/long2ice/fastapi-admin"}},[e._v("FASTAPI-ADMIN")]),e._v(" - FastAPI Admin Dashboard ")])}],ft={computed:Object(w["a"])({},Object(C["c"])(["site"]))},pt=ft,mt=(a("53d7"),Object(h["a"])(pt,_t,dt,!1,null,null,null)),ht=mt.exports,bt={components:{BSidebar:ut,BFooter:ht},computed:Object(w["a"])({},Object(C["c"])(["site"]),{collapsed:function(){return this.foldLevel>0}}),data:function(){return{path:[],header:"",foldLevel:0}},watch:{},methods:{toggleSidebar:function(){++this.foldLevel>2&&(this.foldLevel=0)}},created:function(){}},gt=bt,vt=(a("8242"),Object(h["a"])(gt,ze,Ge,!1,null,null,null)),Et=vt.exports,Ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.data.html?a("div",{domProps:{innerHTML:e._s(e.data.html)}}):e._e()},yt=[],wt={data:function(){return{data:{},html:""}},methods:{fetch:function(){var e=this;this.$http.get("/home").then((function(t){var a=t.data;e.data=a}))}},created:function(){this.fetch()}},Ct=wt,Pt=Object(h["a"])(Ct,Ot,yt,!1,null,null,null),kt=Pt.exports;o["default"].use(l["a"]);var Dt=new l["a"]({scrollBehavior:function(){return{x:0,y:0}},routes:[{path:"/login",name:"login",component:Ke,meta:{isPublic:!0}},{path:"/logout",name:"logout",component:He,meta:{isPublic:!0}},{path:"/",component:Et,children:[{path:"/",redirect:"/home"},{path:"/home",name:"home",component:kt},{path:"/rest/:resource/stat/:type?",name:"stat",component:be},{path:"/rest/:resource",name:"index",component:S},{path:"/rest/:resource/create/:group?",name:"create",component:V},{path:"/rest/:resource/:id/edit/:group?",name:"edit",component:V},{path:"/rest/:resource/:id/:group?",name:"show",component:oe},{path:"/form/:uri?",name:"form",component:we},{path:"/table/:uri?",name:"table",component:T},{path:"/page/:uri?",name:"page",component:xe}]}]});Dt.beforeEach((function(e,t,a){c["a"].state.auth.token||e.meta.isPublic?a():a({name:"login"})}));t["a"]=Dt},ac01:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){var core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a4d3"),core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("e01a"),core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("99af"),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("4de4"),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("7db0"),core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("caad"),core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("b0c0"),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("2532"),core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("841c"),core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_9__),vue__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("a026"),vuedraggable__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("310e"),vuedraggable__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(vuedraggable__WEBPACK_IMPORTED_MODULE_11__),_riophae_vue_treeselect__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("ca17"),_riophae_vue_treeselect__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(_riophae_vue_treeselect__WEBPACK_IMPORTED_MODULE_12__),_riophae_vue_treeselect_dist_vue_treeselect_min_css__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("6f8d"),_riophae_vue_treeselect_dist_vue_treeselect_min_css__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(_riophae_vue_treeselect_dist_vue_treeselect_min_css__WEBPACK_IMPORTED_MODULE_13__),_FormSelect2__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("df4d"),vue2_datepicker__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("ec45"),vue2_datepicker_index_css__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("411c"),vue2_datepicker_index_css__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(vue2_datepicker_index_css__WEBPACK_IMPORTED_MODULE_16__),vue2_datepicker_locale_zh_cn__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("7b16"),vue2_datepicker_locale_zh_cn__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(vue2_datepicker_locale_zh_cn__WEBPACK_IMPORTED_MODULE_17__),_FormUploader__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("0958"),vue_html5_editor__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("c097"),vue_html5_editor__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(vue_html5_editor__WEBPACK_IMPORTED_MODULE_19__),lodash__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("2ef0"),lodash__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_20__);__webpack_exports__["a"]={components:{DatePicker:vue2_datepicker__WEBPACK_IMPORTED_MODULE_15__["default"],BSelect:_FormSelect2__WEBPACK_IMPORTED_MODULE_14__["a"],BDraggable:vuedraggable__WEBPACK_IMPORTED_MODULE_11___default.a,BTreeSelect:_riophae_vue_treeselect__WEBPACK_IMPORTED_MODULE_12___default.a},props:{languages:{},id:{required:!0},parent:{},value:{},field:{},state:{},name:{}},computed:{cropperOptions:function(){return{"upload-url":global.API_URI+"upload","upload-headers":{Authorization:"Bearer "+this.$store.state.auth.token},"upload-form-name":"file","upload-form-data":{from:"cropper"},"cropper-options":{viewMode:2,aspectRatio:lodash__WEBPACK_IMPORTED_MODULE_20___default.a.get(this.field,"cropper.ratio",1)},"output-options":this.field.cropper,labels:this.field.labels||{submit:"提交",cancel:"取消"}}},isSelect:function(){return["select","select2"].includes(this.field.type)},isSelect2:function(){return["select2"].includes(this.field.type)},groupedOptions:function(){return lodash__WEBPACK_IMPORTED_MODULE_20___default.a.groupBy(this.options,"group")},myFields:function(){var e=this.field.fields;if("string"==typeof e){var t=this.parent[e];if(!t)return{};try{e=JSON.parse(t)}catch(a){e={}}}return this.parent.is_table&&(e._actions={label:this.$t("actions.actions")}),e},description:function(){if(this.field.limit){var e=this.field.limit,t=e.width,a=e.height;return t&&a?"尺寸：".concat(t,"x").concat(a):void 0}return this.field.description},filteredValue:function(){var e=this.value;return this.defaultValue||(["object","json"].includes(this.field.type)&&(e={}),(["array"].includes(this.field.type)||this.field.multiple)&&(e=[])),e},isArrayValue:function(){return this.field.multiple||this.field.is_array||"array"==this.field.type||this.field.is_table},isIntl:function(){return this.field.intl||this.field.multilingual},selectedValue1:function(){var e=this,t=this.initSelectedValue;return t=this.isArrayValue?lodash__WEBPACK_IMPORTED_MODULE_20___default.a.filter(this.options,(function(t){return e.value&&e.value.includes(t.value)})):lodash__WEBPACK_IMPORTED_MODULE_20___default.a.find(this.options,(function(t){return e.value==t.value})),t},model:{get:function(){var e=this.field.multiple||this.field.is_array||"array"==this.field.type||this.field.is_table,t="object"==this.field.type||"json"==this.field.type,a=this.value;return this.value||(e?a=[]:t&&(a={})),this.isIntl?lodash__WEBPACK_IMPORTED_MODULE_20___default.a.get(a,this.currentLanguage,""):a},set:function(e){this.$emit("input",e,this.currentLanguage)}}},data:function(){var e=this.field.multiple||this.field.is_array||"array"==this.field.type||this.field.is_table;return{currentLanguage:this.field.currentLanguage||"en",options:this.field.options||[],initSelectedValue:e&&!this.value?[]:this.value,selectedValue:e&&!this.value?[]:this.value}},methods:{addRow:function(){var e=this;this.parent[this.name]||this.$set(this.parent,this.name,[]),this.$nextTick((function(){e.model.push({})}))},initEditor:function(){var e="zh-cn";window.document.execCommand("defaultParagraphSeparator",!1,"p");var t=this.field.modules||["text","heading","align","list","link","unlink","tabulation","image","hr","eraser","undo","full-screen","cropper"],a=lodash__WEBPACK_IMPORTED_MODULE_20___default.a.get(this.field,"cropper.icon","fa fa-crop text-danger");vue__WEBPACK_IMPORTED_MODULE_10__["default"].use(vue_html5_editor__WEBPACK_IMPORTED_MODULE_19___default.a,{name:"b-html-editor",language:e,showModuleName:!1,modules:[{name:"cropper",icon:a,i18n:"cropper",show:!0,handler:function(e){e.$emit("open-cropper")}},{name:"heading",icon:"fa fa-header",i18n:"heading",show:!0,dashboard:{template:'\n                <div>\n                  <button v-for="h in 6" type="button" @click="setHeading(h)">H{{h}}</button>\n                </div>\n              ',methods:{setHeading:function(e){this.$parent.execCommand("formatBlock","h".concat(e))}}}}],i18n:{"zh-cn":{cropper:"图片裁剪",heading:"标题"}},image:{sizeLimit:10485760,upload:{url:global.API_URI+"upload",headers:{Authorization:"Bearer "+this.$store.state.auth.token},fieldName:"file"},uploadHandler:function(e){var t;try{t=JSON.parse(e)}catch(a){this.$notify.error("上传失败")}return t.url}},visibleModules:t})},cropperUploaded:function(e){this.$refs.editor.execCommand("insertHTML",'<img src="'.concat(e.url,'" />'))},cropperUploadComplete:function(e){e.message&&this.$snotify.error(e.message)},changeLanguage:function(e){this.currentLanguage=e},htmlEditorInput:function(e){this.$emit("input",e,this.currentLanguage)},wrapFirstLine:function(){},treeSelectNormalizer:function(e){return{id:e.value,label:e.text}},getFormatter:function getFormatter(field){return field.format?eval(field.format):function(e){return e}},fetchAjaxOptions:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.field.ajaxOptions,s=a.url,i=a.resource,r=a.where,n=void 0===r?{}:r;a.text,a.depends;a.where=Object.assign({},n,t),this.q&&(a.q=this.q);var o=s?lodash__WEBPACK_IMPORTED_MODULE_20___default.a.template(s)({item:this.parent}):i+"/options";this.$http.get(o,{params:a}).then((function(t){var a=t.data;e.options=a}))}},mounted:function(){this.field.type},created:function(){"html"==this.field.type&&this.initEditor(),this.field.ajaxOptions&&!0!==this.field.ajaxOptions.search&&this.fetchAjaxOptions(),this.isSelect2}}}).call(this,__webpack_require__("c8ba"))},af71:function(e,t,a){"use strict";var s=a("6155"),i=a.n(s);i.a},b619:function(e,t,a){"use strict";var s=a("9120"),i=a.n(s);i.a},ba6a:function(e,t,a){"use strict";(function(e){a("d3b7");var s=a("a026"),i=a("bc3a"),r=a.n(i),n=a("4360"),o=a("2ef0"),l=a.n(o),c=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_API_URL||"http://127.0.0.1:8000/admin/";e.API_URI=c,r.a.defaults.baseURL=c,e.LOADING_ENABLED=!0,r.a.interceptors.request.use((function(t){return e.LOADING_ENABLED&&n["a"].commit(n["b"].START_LOADING),t.headers.Authorization="Bearer "+n["a"].state.auth.token,t})),r.a.interceptors.response.use((function(t){n["a"].commit(n["b"].STOP_LOADING),e.LOADING_ENABLED=!0;var a=l.a.get(t,"data._meta.page_header");return n["a"].commit(n["b"].SET_PAGE_HEADER,a),t}),(function(e){var t=e.response;n["a"].commit(n["b"].STOP_LOADING);var a=t.data,i=t.status,r=t.statusText;switch(i){case 401:n["a"].dispatch(n["b"].GO_LOGIN);break;case 404:s["default"].prototype.$snotify.error(String(r));break;default:var o=l.a.get(a,"msg");o&&s["default"].prototype.$snotify.error(String(o))}return Promise.reject(t)})),s["default"].prototype.$http=r.a,t["a"]=r.a}).call(this,a("c8ba"))},bf45:function(e,t,a){"use strict";var s=a("c97f"),i=a.n(s);i.a},c248:function(e,t,a){},c34b:function(e,t,a){},c3c7:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b0c0"),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("25f0"),core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("5319"),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_4__);__webpack_exports__["a"]={props:{},data:function(){return{loaded:!1,name:null,page:null}},computed:{uri:function(){return this.$route.params.uri.replace(/\./g,"/")}},watch:{$route:"fetch"},methods:{fetch:function(){this.fetchPage()},render:function(){},fetchPage:function(){var e=this;this.$http.get(this.uri).then((function(t){var a=t.data;a.name="server-page-"+(new Date).getTime().toString(),e.page=Object.assign({},a)}))},onSuccess:function onSuccess(data){var message=data.message,then=data.then,redirect=data.redirect;message&&this.$snotify.success(message),then?eval(then):redirect?this.$router.push({path:redirect}):this.$router.go(-1)}},mounted:function(){},created:function(){this.fetchPage()}}},c97f:function(e,t,a){},d751:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){var core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("99af"),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("7db0"),core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("d81d"),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a9e3"),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_object_entries__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("4fad"),core_js_modules_es_object_entries__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_object_entries__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("ddb0"),core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_6__),E_downcode_fastapi_admin_front_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("3835"),lodash__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("2ef0"),lodash__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_8__);__webpack_exports__["a"]={name:"b-form-builder",components:{},props:{parent:{},subForm:{type:String,default:""},id:{type:String,default:function(){return"form_"+parseInt(9999*Math.random())}},auth:{type:Object,default:function(){return{}}},col:{type:Number,default:12},languages:{},inline:{type:Boolean,default:!1},useFormData:{type:Boolean,default:!1},submitRawForm:{type:Boolean,default:!1},groupBy:{type:String,default:null},value:{type:Object,default:function(){return{}}},fields:{required:!0,default:function(){return{}}},layout:{required:!1,default:function(){return{}}},onSubmit:{type:Function,required:!1},beforeSubmit:{type:Function,required:!1},action:{},method:{default:"post"},submitText:{default:function(){return this.$t?this.$t("actions.save"):"Submit"}},backText:{default:function(){return this.$t?this.$t("actions.back"):"Back"}},successMessage:{default:function(){return this.$t?this.$t("messages.succeed"):"Succeed"}}},data:function(){return{model:null,errors:[]}},watch:{},computed:{tag:function(){return this.subForm?"div":"form"},actionUrl:function(){return global.API_URI+this.action},groupedFields:function(){var e=this,t={};return lodash__WEBPACK_IMPORTED_MODULE_8___default.a.keys(lodash__WEBPACK_IMPORTED_MODULE_8___default.a.groupBy(this.fields,this.groupBy)).map((function(a){var s=a;"undefined"===a&&(a=null,s=e.$t("messages.default")),t[s]=lodash__WEBPACK_IMPORTED_MODULE_8___default.a.pickBy(e.fields,(function(e){return e.group==a}))})),t}},methods:{getFieldId:function(e){return this.subForm?"input_".concat(this.subForm,"_").concat(e):"input_".concat(e)},getFieldName:function(e){return this.subForm?"".concat(this.subForm,"[").concat(e,"]"):e},setValue:function(e,t,a){var s=this.fields[e].multilingual||this.fields[e].intl;return s?a&&!lodash__WEBPACK_IMPORTED_MODULE_8___default.a.isObject(this.model[e])?this.$set(this.model,e,{}):this.$set(this.model[e],a,t):this.$set(this.model,e,t),this.$emit("input",this.model)},titlize:function(){},isShowField:function isShowField(field){return!field.showWhen||this.model[field.showWhen]||eval(field.showWhen)},getInputClass:function(){return[]},getClass:function(e){var t=e.cols?e.cols:12,a=["col-lg-"+t,"col-"+Math.min(12,2*t)];return a},hasError:function(e){return lodash__WEBPACK_IMPORTED_MODULE_8___default.a.find(this.errors,(function(t){return t.field==e}))},submitForm:function(){this.$refs.submitButton.click()},handleSubmit:function(){var e=this;if(this.beforeSubmit){var t=this.beforeSubmit(this.model);if(!1===t)return!1}if(this.submitRawForm)return this.$refs.form.submit(),!0;if(this.onSubmit)return this.onSubmit(this.model);var a=String(this.method).toLowerCase(),s=this.model;this.useFormData&&(s=new FormData,lodash__WEBPACK_IMPORTED_MODULE_8___default.a.mapValues(this.model,(function(e,t){return s.append(t,e)}))),this.$http[a](this.action,s).then((function(t){var a=t.data;e.successMessage&&e.$snotify.success(e.successMessage),e.errors=[],e.$emit("success",a)})).catch((function(t){var a=t.data,s=t.status;422==s&&(e.errors=a.message)}))}},mounted:function(){var e=this;this.model=Object.assign({},this.value);for(var t=0,a=Object.entries(this.fields);t<a.length;t++){var s=Object(E_downcode_fastapi_admin_front_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_7__["a"])(a[t],2),i=s[0],r=s[1];"object"!==r.type||this.model[i]||this.$set(this.model,i,{})}this.$watch("value",(function(t){e.model=Object.assign({},t)}),{deep:!0})},created:function(){}}}).call(this,__webpack_require__("c8ba"))},df4d:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-select",{attrs:{label:"text",options:e.newOptions,multiple:e.multiple},on:{search:e.getAjaxOptions},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},[a("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v(e._s(e.noOptionsText))])])},i=[],r=(a("99af"),a("4de4"),a("7db0"),a("caad"),a("d81d"),a("fb6a"),a("b0c0"),a("2532"),a("ade3")),n=a("4a7a"),o=a.n(n),l={components:{VSelect:o.a},data:function(){return{newOptions:this.options.slice(0),q:""}},props:{value:{deafult:function(){return this.multiple?[]:null}},options:{default:function(){return[]}},name:{},multiple:{},field:{},parent:{},ajaxOptions:{},noOptionsText:{default:function(){return this.$t("messages.no_options_text")}}},computed:{model:{get:function(){var e=this;return this.multiple?this.newOptions.filter((function(t){return e.value.includes(t.value)})):this.newOptions.find((function(t){return e.value===t.value}))},set:function(e){if(null===e||null===e.value)return this.$emit("input",null);var t;if(this.multiple){var a=JSON.stringify(e)!==JSON.stringify(this.value);a&&(t=e.map((function(e){return e.value})))}else t=e.value;null!==t&&this.$emit("input",t)}}},methods:{getAjaxOptions:function(e){this.q=e,this.fetchOptions()},initOptionsForSelect2:function(){var e=this.parent[this.name+"_data"];e&&(this.newOptions=this.options.concat(e))},fetchOptions:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.ajaxOptions,s=a.url,i=a.resource,r=a.where,n=void 0===r?{}:r;a.text,a.depends;a.where=Object.assign({},n,t),this.q&&(a.q=this.q);var o=s?_.template(s)({item:this.parent}):i+"/options";this.$http.get(o,{params:a}).then((function(t){var a=t.data;e.model={value:null},e.newOptions=a}))}},mounted:function(){var e=this;if(this.ajaxOptions){var t=this.ajaxOptions,a=(t.url,t.resource,t.where,t.depends);a?this.$watch("parent.".concat(a),(function(t){e.fetchOptions(Object(r["a"])({},a,t))}),{immediate:!0}):this.fetchOptions()}}},c=l,u=a("2877"),d=Object(u["a"])(c,s,i,!1,null,null,null);t["a"]=d.exports},e0e1:function(e){e.exports=JSON.parse('{"actions":{"select_all":"Select all","clear_selected":"Clear selected","delete_all":"Delete all"},"messages":{"paginate":"Total: {total}","deleted":"Deleted","login_footer":"FASTAPI ADMIN - FastAPI Admin Dashboard","deleted_all":"All deleted","confirm_delete":"Are you sure you want to delete?","image_size":"Size limit: {width}x{height}","confirm_bulk_action":"Are you sure you want to do bulk action?","no_options_text":"No Options Here!","bulk_success":"Bulk action success!"},"errors":{}}')},f203:function(e,t,a){"use strict";var s=a("9741"),i=a.n(s);i.a}});